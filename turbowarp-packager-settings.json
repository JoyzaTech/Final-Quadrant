{"packagedRuntime":false,"cloudVariables":{"mode":"ws","cloudHost":"wss://clouddata.turbowarp.org","custom":{"☁ Map Data":"ws","☁ User Data":"ws","☁ Faction Data":"ws","☁ Planet Data 1":"ws","☁ Planet Data 2":"ws","☁ Planet Data 3":"ws","☁ Planet Data 4":"ws","☁ Planet Register Data":"ws"},"specialCloudBehaviors":false,"unsafeCloudBehaviors":false},"turbo":false,"interpolation":false,"framerate":30,"highQualityPen":false,"maxClones":300,"fencing":true,"miscLimits":true,"stageWidth":480,"stageHeight":360,"resizeMode":"preserve-ratio","autoplay":false,"username":"player####","closeWhenStopped":false,"projectId":"p4-@Final Quadrant.sb3","custom":{"css":"","js":""},"appearance":{"background":"#000000","foreground":"#ffffff","accent":"#ff4c4c"},"loadingScreen":{"progressBar":true,"text":"","imageMode":"normal","image":null},"controls":{"greenFlag":{"enabled":false},"stopAll":{"enabled":false},"fullscreen":{"enabled":false},"pause":{"enabled":false}},"monitors":{"editableLists":false,"variableColor":"#ff8c1a","listColor":"#fc662c"},"compiler":{"enabled":true,"warpTimer":false},"target":"html","app":{"icon":null,"packageName":"final-quadrant","windowTitle":"Final Quadrant","windowMode":"window","version":"1.0.0","escapeBehavior":"unfullscreen-only","windowControls":"default"},"chunks":{"gamepad":false,"pointerlock":false},"cursor":{"type":"auto","custom":null,"center":{"x":0,"y":0}},"steamworks":{"appId":"480","onError":"warning"},"extensions":["https://extensions.turbowarp.org/SharkPool/Camera.js","https://extensions.turbowarp.org/Lily/TempVariables2.js","data:text/javascript;base64,Ly8gTmFtZTogSHlwZXIgU2Vuc2UNCi8vIElEOiBIeXBlclNlbnNlU1ANCi8vIERlc2NyaXB0aW9uOiBDb29sIE5ldyBTZW5zaW5nIEJsb2Nrcw0KLy8gQnk6IFNoYXJrUG9vbA0KDQovLyBWZXJzaW9uIDMuMC4wMQ0KDQooZnVuY3Rpb24gKFNjcmF0Y2gpIHsNCiAgInVzZSBzdHJpY3QiOw0KICBpZiAoIVNjcmF0Y2guZXh0ZW5zaW9ucy51bnNhbmRib3hlZCkgdGhyb3cgbmV3IEVycm9yKCJIeXBlciBTZW5zZSBtdXN0IHJ1biB1bnNhbmRib3hlZCIpOw0KDQogIGNvbnN0IG1lbnVJY29uVVJJID0NCiJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGRwWkhSb1BTSXhORFV1TWpreklpQm9aV2xuYUhROUlqRTBOUzR5T1RNaUlIWnBaWGRDYjNnOUlqQWdNQ0F4TkRVdU1qa3pJREUwTlM0eU9UTWlQanhuSUhOMGNtOXJaUzF0YVhSbGNteHBiV2wwUFNJeE1DSStQSEJoZEdnZ1pEMGlUVEFnTnpJdU5qUTNRekFnTXpJdU5USTFJRE15TGpVeU5TQXdJRGN5TGpZME55QXdjemN5TGpZME55QXpNaTQxTWpVZ056SXVOalEzSURjeUxqWTBOeTB6TWk0MU1qVWdOekl1TmpRM0xUY3lMalkwTnlBM01pNDJORGRUTUNBeE1USXVOelk1SURBZ056SXVOalEzSWlCbWFXeHNQU0lqTkRJM1pqazVJaTgrUEhCaGRHZ2daRDBpVFRndU1Ea3hJRGN5TGpZME4yTXdMVE0xTGpZMU15QXlPQzQ1TURNdE5qUXVOVFUySURZMExqVTFOaTAyTkM0MU5UWnpOalF1TlRVMklESTRMamt3TXlBMk5DNDFOVFlnTmpRdU5UVTJMVEk0TGprd015QTJOQzQxTlRZdE5qUXVOVFUySURZMExqVTFObE00TGpBNU1TQXhNRGd1TXlBNExqQTVNU0EzTWk0Mk5EY2lJR1pwYkd3OUlpTTFZMkl4WkRZaUx6NDhjR0YwYUNCa1BTSk5NVEEyTGpJeE5TQXhNRGd1T0RnMFlUSXVOamNnTWk0Mk55QXdJREFnTVMweExqZzROaTB1TnpoTU16Y3VOelVnTkRFdU5USXlZVEl1TmpjZ01pNDJOeUF3SURBZ01TQXdMVE11TnpjeUlESXVOamNnTWk0Mk55QXdJREFnTVNBekxqYzNNaUF3YkRZMkxqVTRJRFkyTGpVNFlUSXVOalk1SURJdU5qWTVJREFnTUNBeExURXVPRGczSURRdU5UVTBJaUJtYVd4c1BTSWpabVptSWk4K1BIQmhkR2dnWkQwaVRUWTFMamMxTkNBMU1TNHdPRE5qTUNBNExqRXdNeTAyTGpVMk9DQXhOQzQyTnpFdE1UUXVOamN4SURFMExqWTNNWE10TVRRdU5qY3hMVFl1TlRZNExURTBMalkzTVMweE5DNDJOMk13TFRndU1UQTBJRFl1TlRZNExURTBMalkzTWlBeE5DNDJOeTB4TkM0Mk56SWdPQzR4TURRZ01DQXhOQzQyTnpJZ05pNDFOamdnTVRRdU5qY3lJREUwTGpZM01TSWdabWxzYkQwaUkyWm1aaUl2UGp4d1lYUm9JR1E5SWswMk15NDNNaUE0TVM0ek56RmpMVGN1T0RnMUxURXVPRFl5TFRFeUxqYzJPUzA1TGpjMk5DMHhNQzQ1TURZdE1UY3VOalZ6T1M0M05qUXRNVEl1TnpZNUlERTNMalkxTFRFd0xqa3dOeUF4TWk0M05qa2dPUzQzTmpVZ01UQXVPVEEzSURFM0xqWTFZeTB4TGpnMk1pQTNMamc0TmkwNUxqYzJOU0F4TWk0M055MHhOeTQyTlNBeE1DNDVNRGNpSUdacGJHdzlJaU5tWm1ZaUx6NDhjR0YwYUNCa1BTSk5PVGN1TnpZM0lEZ3pMakE1TkdNd0lEZ3VNVEF5TFRZdU5UY2dNVFF1TmpjekxURTBMalkzTXlBeE5DNDJOek56TFRFMExqWTNNaTAyTGpVM0xURTBMalkzTWkweE5DNDJOek1nTmk0MU5qa3RNVFF1TmpjeElERTBMalkzTWkweE5DNDJOekZqT0M0eE1ESWdNQ0F4TkM0Mk56TWdOaTQxTnlBeE5DNDJOek1nTVRRdU5qY2lJR1pwYkd3OUlpTm1abVlpTHo0OGNHRjBhQ0JrUFNKTk1UQTJMakl4TlNBeE1EZ3VPRGcwWVRJdU5qY2dNaTQyTnlBd0lEQWdNUzB4TGpnNE5pMHVOemhzTFRFMkxqTTBMVEUyTGpNMFlUSXVOalkxSURJdU5qWTFJREFnTUNBeElEQXRNeTQzTnpNZ01pNDJOeUF5TGpZM0lEQWdNQ0F4SURNdU56Y3lJREJzTVRZdU16UWdNVFl1TXpSaE1pNDJOeUF5TGpZM0lEQWdNQ0F4SURBZ015NDNOek1nTWk0Mk9DQXlMalk0SURBZ01DQXhMVEV1T0RnMkxqYzRJaUJtYVd4c1BTSWpabVptSWk4K1BIQmhkR2dnWkQwaVRURTFMak14TlNBM01pNDJORGNnTWpndU1USXlJRFU1TGpnMGRqSTFMall4TkhwdE56QXVNVE01TFRRMExqVXlOVWcxT1M0NE5Hd3hNaTQ0TURjdE1USXVPREEzZW0wME5DNDFNalVnTkRRdU5USTFMVEV5TGpnd055QXhNaTQ0TURkV05Ua3VPRFI2VFRVNUxqZzBJREV4Tnk0eE56Sm9NalV1TmpFMGJDMHhNaTQ0TURjZ01USXVPREEzZWlJZ1ptbHNiRDBpSTJabVppSWdjM1J5YjJ0bFBTSWpabVptSWlCemRISnZhMlV0ZDJsa2RHZzlJakV1TlNJdlBqd3ZaejQ4TDNOMlp6ND0iOw0KDQogIGNvbnN0IHZtID0gU2NyYXRjaC52bTsNCiAgY29uc3QgcnVudGltZSA9IHZtLnJ1bnRpbWU7DQogIGNvbnN0IHJlbmRlciA9IHZtLnJlbmRlcmVyOw0KDQogIGxldCBjdXJQcmVzc0tleSA9IG51bGwsIHByZXNzZWRLZXlzID0ge307DQogIGxldCBtb3VzZVBvcyA9IFswLCAwXSwgc2Nyb2xsRGlzdCA9IDAsIG9sZFNjcm9sbCA9IFswLCAwLCAwXTsNCiAgbGV0IHB1YmxpY1ZhcnMgPSB7fSwgYXNrQXMgPSAic3ByaXRlIiwgbG91ZG5lc3NBcnJheSA9IFtdOw0KDQogIGNsYXNzIEh5cGVyU2Vuc2VTUCB7DQogICAgY29uc3RydWN0b3IoKSB7DQogICAgICBydW50aW1lLm9uKCJCRUZPUkVfRVhFQ1VURSIsICgpID0+IHsNCiAgICAgICAgcnVudGltZS5zdGFydEhhdHMoIkh5cGVyU2Vuc2VTUF93aGVuS2V5UHJlc3NlZCIpOw0KICAgICAgICBvbGRTY3JvbGxbMl0gKz0gKDAgLSBvbGRTY3JvbGxbMl0pIC8gNDsNCiAgICAgICAgT2JqZWN0LmtleXMocHJlc3NlZEtleXMpLmZvckVhY2goa2V5ID0+IHsgcHJlc3NlZEtleXNba2V5XSArPSAwLjEgfSk7DQogICAgICB9KTsNCiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIndoZWVsIiwgdGhpcy5oYW5kbGVTY3JvbGwpOw0KICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIiwgKGV2ZW50KSA9PiB7IG1vdXNlUG9zID0gW2V2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFldIH0pOw0KICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsIChldmVudCkgPT4gew0KICAgICAgICBjb25zdCBuYW1lID0gZXZlbnQua2V5LnRvVXBwZXJDYXNlKCk7DQogICAgICAgIGlmIChwcmVzc2VkS2V5c1tuYW1lXSA9PT0gdW5kZWZpbmVkKSBwcmVzc2VkS2V5c1tuYW1lXSA9IDA7DQogICAgICAgIGN1clByZXNzS2V5ID0gbmFtZTsNCiAgICAgIH0pOw0KICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigia2V5dXAiLCAoZXZlbnQpID0+IHsNCiAgICAgICAgZGVsZXRlIHByZXNzZWRLZXlzW2V2ZW50LmtleS50b1VwcGVyQ2FzZSgpXTsNCiAgICAgICAgY3VyUHJlc3NLZXkgPSBPYmplY3Qua2V5cyhwcmVzc2VkS2V5cykucG9wKCkgfHwgbnVsbDsNCiAgICAgIH0pOw0KICAgIH0NCiAgICBnZXRJbmZvKCkgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgaWQ6ICJIeXBlclNlbnNlU1AiLA0KICAgICAgICBuYW1lOiAiSHlwZXIgU2Vuc2UiLA0KICAgICAgICBjb2xvcjE6ICIjNWNiMWQ2IiwNCiAgICAgICAgY29sb3IyOiAiIzQ3YThkMSIsDQogICAgICAgIGNvbG9yMzogIiMyZThlYjgiLA0KICAgICAgICBtZW51SWNvblVSSSwNCiAgICAgICAgYmxvY2tzOiBbDQogICAgICAgICAgeyBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkxBQkVMLCB0ZXh0OiAiU2Nyb2xsaW5nIiB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogIm1vbml0b3JTY3JvbGxXaGVlbCIsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLA0KICAgICAgICAgICAgdGV4dDogInNjcm9sbCBkaXN0YW5jZSINCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogInNjcm9sbFZlbCIsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLA0KICAgICAgICAgICAgdGV4dDogInNjcm9sbCB2ZWxvY2l0eSINCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogInNldFNjcm9sbERpc3RhbmNlIiwNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwNCiAgICAgICAgICAgIHRleHQ6ICJzZXQgc2Nyb2xsIGRpc3RhbmNlIHRvIFtESVNUQU5DRV0iLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIERJU1RBTkNFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAwIH0NCiAgICAgICAgICAgIH0sDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICJjaGFuZ2VTY3JvbGxEaXN0YW5jZSIsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsDQogICAgICAgICAgICB0ZXh0OiAiY2hhbmdlIHNjcm9sbCBkaXN0YW5jZSBieSBbRElTVEFOQ0VdIiwNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICBESVNUQU5DRTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMTAwIH0NCiAgICAgICAgICAgIH0sDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICJzY3JvbGxXaGVlbEhhdCIsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkVWRU5ULA0KICAgICAgICAgICAgdGV4dDogIndoZW4gc2Nyb2xsZWQgdXAiLA0KICAgICAgICAgICAgaXNFZGdlQWN0aXZhdGVkOiBmYWxzZSwNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICBFVkVOVDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJTQ1JPTExfRVZFTlRTIiB9DQogICAgICAgICAgICB9LA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAic2Nyb2xsV2hlZWxIYXQyIiwNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuRVZFTlQsDQogICAgICAgICAgICB0ZXh0OiAid2hlbiBzY3JvbGxlZCBkb3duIiwNCiAgICAgICAgICAgIGlzRWRnZUFjdGl2YXRlZDogZmFsc2UNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogInNjcm9sbFdoZWVsQm9vbCIsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkJPT0xFQU4sDQogICAgICAgICAgICB0ZXh0OiAiaXMgc2Nyb2xsaW5nIFtFVkVOVF0/IiwNCiAgICAgICAgICAgIGRpc2FibGVNb25pdG9yOiB0cnVlLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIEVWRU5UOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlNDUk9MTF9FVkVOVFMiIH0NCiAgICAgICAgICAgIH0sDQogICAgICAgICAgfSwNCiAgICAgICAgICB7IGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuTEFCRUwsIHRleHQ6ICJNb3VzZSBEZXRlY3Rpb24iIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAibW91c2VDbGljayIsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkJPT0xFQU4sDQogICAgICAgICAgICB0ZXh0OiAiaXMgbW91c2UgW0JVVFRPTl0gZG93bj8iLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIEJVVFRPTjogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIG1lbnU6ICJtb3VzZUJ1dHRvbnMiIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogInJlYWxYIiwNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsDQogICAgICAgICAgICB0ZXh0OiAicmVhbCBtb3VzZSB4Ig0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAicmVhbFkiLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwNCiAgICAgICAgICAgIHRleHQ6ICJyZWFsIG1vdXNlIHkiDQogICAgICAgICAgfSwNCiAgICAgICAgICB7IGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuTEFCRUwsIHRleHQ6ICJLZXkgRGV0ZWN0aW9uIiB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogIndoZW5LZXlIaXQiLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5IQVQsDQogICAgICAgICAgICB0ZXh0OiAid2hlbiBbS0VZXSBoaXQiLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIEtFWTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJrZXlzIiB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICJpc0tleUhpdCIsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkJPT0xFQU4sDQogICAgICAgICAgICB0ZXh0OiAia2V5IFtLRVldIGhpdD8iLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIEtFWTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJrZXlzIiB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSwNCiAgICAgICAgICAiLS0tIiwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICJ3aGVuS2V5UHJlc3NlZCIsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkhBVCwNCiAgICAgICAgICAgIHRleHQ6ICJ3aGVuIFtLRVldIHByZXNzZWQiLA0KICAgICAgICAgICAgaXNFZGdlQWN0aXZhdGVkOiBmYWxzZSwNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICBLRVk6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAia2V5cyIsIGRlZmF1bHRWYWx1ZTogIlRhYiIgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAiaXNLZXlQcmVzc2VkIiwNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQk9PTEVBTiwNCiAgICAgICAgICAgIHRleHQ6ICJrZXkgW0tFWV0gcHJlc3NlZD8iLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIEtFWTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJrZXlzIiwgZGVmYXVsdFZhbHVlOiAiVGFiIiB9DQogICAgICAgICAgICB9LA0KICAgICAgICAgIH0sDQogICAgICAgICAgIi0tLSIsDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAiY3VycmVudEtleSIsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLA0KICAgICAgICAgICAgdGV4dDogImN1cnJlbnQga2V5IHByZXNzZWQiDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICJjdXJyZW50S2V5cyIsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLA0KICAgICAgICAgICAgdGV4dDogImN1cnJlbnQga2V5cyBwcmVzc2VkIg0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAidGltZUtleVByZXNzZWQiLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwNCiAgICAgICAgICAgIHRleHQ6ICJzZWNvbmRzIFtLRVldIGtleSBwcmVzc2VkIiwNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICBLRVk6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAia2V5cyIgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0sDQogICAgICAgICAgeyBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkxBQkVMLCB0ZXh0OiAiVG91Y2hpbmcgRXhwYW5kZWQiIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAic3ByaXRlUG9pbnRpbmciLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5CT09MRUFOLA0KICAgICAgICAgICAgdGV4dDogImlzIFtTUFJJVEUxXSBwb2ludGluZyB0b3dhcmRzIFtTUFJJVEUyXT8iLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIFNQUklURTE6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiVEFSR0VUUzMiIH0sDQogICAgICAgICAgICAgIFNQUklURTI6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiVEFSR0VUUyIgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAic3ByaXRlVG91Y2hpbmdTcHJpdGUiLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5CT09MRUFOLA0KICAgICAgICAgICAgdGV4dDogImlzIFtTUFJJVEUxXSB0b3VjaGluZyBbU1BSSVRFMl0/IiwNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICBTUFJJVEUxOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlRBUkdFVFMiIH0sDQogICAgICAgICAgICAgIFNQUklURTI6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiVEFSR0VUUzMiIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogInNwcml0ZVRvdWNoaW5nQ2xvbmUiLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5CT09MRUFOLA0KICAgICAgICAgICAgdGV4dDogImlzIFtTUFJJVEUxXSB0b3VjaGluZyBjbG9uZSBvZiBbU1BSSVRFMl0gd2l0aCBbVkFSXSBzZXQgdG8gW1ZBTF0/IiwNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICBTUFJJVEUxOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlRBUkdFVFMzIiB9LA0KICAgICAgICAgICAgICBTUFJJVEUyOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlRBUkdFVFM0IiB9LA0KICAgICAgICAgICAgICBWQVI6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6ICJteSB2YXJpYWJsZSIgfSwNCiAgICAgICAgICAgICAgVkFMOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiAwIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LA0KICAgICAgICAgICItLS0iLA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogInNwcml0ZUN1cnJlbnRUb3VjaGluZyIsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLA0KICAgICAgICAgICAgdGV4dDogInNwcml0ZXMgdG91Y2hpbmcgW1NQUklURV0iLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIFNQUklURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJUQVJHRVRTMiIgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAiZ2V0TmVpZ2hib3JzIiwNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsDQogICAgICAgICAgICB0ZXh0OiAibmVpZ2hib3JzIG9mIFtTUFJJVEVdIGluIHJhbmdlIFtESUFNRVRFUl0iLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIFNQUklURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJUQVJHRVRTMiIgfSwNCiAgICAgICAgICAgICAgRElBTUVURVI6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDIwMCB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSwNCiAgICAgICAgICAiLS0tIiwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICJjb2xvclRvdWNoaW5nU3ByaXRlIiwNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsDQogICAgICAgICAgICB0ZXh0OiAiY29sb3IgdG91Y2hpbmcgW1NQUklURV0iLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIFNQUklURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJUQVJHRVRTMiIgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAiY29sb3JBdFBvc2l0aW9uIiwNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsDQogICAgICAgICAgICB0ZXh0OiAiY29sb3IgYXQgeCBbeF0geSBbeV0iLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIHg6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDAgfSwNCiAgICAgICAgICAgICAgeTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMCB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSwNCiAgICAgICAgICB7IGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuTEFCRUwsIHRleHQ6ICJTdHJpbmdzIiB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogImJvb2xlYW4iLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5CT09MRUFOLA0KICAgICAgICAgICAgdGV4dDogImlzIFtTVFJJTkddIHJlYWw/IiwNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICBTVFJJTkc6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogImdldEFsbFN0cmluZyIsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLA0KICAgICAgICAgICAgdGV4dDogImdldCBbVEVYVF0gaW4gW1NUUklOR10iLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIFNUUklORzogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogInJvdGF0aW5nIGEgNiBtYWtlcyBhIDkhIiB9LA0KICAgICAgICAgICAgICBURVhUOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogInN0cmluZ190eXBlcyIgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0sDQogICAgICAgICAgeyBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkxBQkVMLCB0ZXh0OiAiQXNraW5nIiB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogImFkdmFuY2VkQXNrIiwNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwNCiAgICAgICAgICAgIHRleHQ6ICJhc2sgW1FVRVNUSU9OXSBhcyBbVEhJTkddIGFuZCBbV0FJVF0iLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIFRISU5HOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkFza2luZyIgfSwNCiAgICAgICAgICAgICAgUVVFU1RJT046IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6ICJ3aGF0IGlzIHlvdXIgbmFtZT8iIH0sDQogICAgICAgICAgICAgIFdBSVQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAic2hvdWxkV2FpdCIgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAiYWR2YW5jZWRBc2tSZXBvcnRlciIsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLA0KICAgICAgICAgICAgdGV4dDogImFzayBbUVVFU1RJT05dIGFzIFtUSElOR10iLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIFRISU5HOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkFza2luZyIgfSwNCiAgICAgICAgICAgICAgUVVFU1RJT046IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6ICJ3aGF0IGlzIHlvdXIgbmFtZT8iIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogInN0b3BBc2tpbmciLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELA0KICAgICAgICAgICAgdGV4dDogInN0b3AgYXNraW5nIHF1ZXN0aW9uIg0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAiY3VycmVudFR5cGVkIiwNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsDQogICAgICAgICAgICB0ZXh0OiAidHlwZWQgYW5zd2VyIg0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAiaXNBc2tpbmciLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5CT09MRUFOLA0KICAgICAgICAgICAgdGV4dDogImlzIGFza2luZz8iDQogICAgICAgICAgfSwNCiAgICAgICAgICAiLS0tIiwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICJzZXRBdHQiLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELA0KICAgICAgICAgICAgdGV4dDogInNldCBhc2sgbW9uaXRvciB4OiBbeF0geTogW3ldIHdpZHRoOiBbd2lkdGhdIiwNCiAgICAgICAgICAgIGFyZ3VtZW50czogew0KICAgICAgICAgICAgICB4OiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAwIH0sDQogICAgICAgICAgICAgIHk6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDAgfSwNCiAgICAgICAgICAgICAgd2lkdGg6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDQ4MCB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICJzZXRBc2tUeXBlIiwNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwNCiAgICAgICAgICAgIHRleHQ6ICJzZXQgYXNrIGJveCBpbnB1dCB0byBbVFlQRV0iLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIFRZUEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiSU5QVVRTIiB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICJzZXRBc2tUeXBlMiIsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsDQogICAgICAgICAgICB0ZXh0OiAic2V0IGFzayBib3ggaW5wdXQgdG8gZHJvcGRvd24gd2l0aCBpdGVtcyBpbiBbVFlQRV0iLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIFRZUEU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiTElTVFMiIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogInNldEFza1R5cGUzIiwNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwNCiAgICAgICAgICAgIHRleHQ6ICJzZXQgYXNrIGJveCBpbnB1dCB0byBkcm9wZG93biB3aXRoIGl0ZW1zIGluIGFycmF5IFtUWVBFXSIsDQogICAgICAgICAgICBhcmd1bWVudHM6IHsNCiAgICAgICAgICAgICAgVFlQRTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogIltcIm9wdGlvbiAxXCIsIFwib3B0aW9uIDJcIl0iIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LA0KICAgICAgICAgIHsgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5MQUJFTCwgdGV4dDogIk1pc2NlbGxhbmVvdXMiIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAiaXNTY3JlZW4iLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5CT09MRUFOLA0KICAgICAgICAgICAgdGV4dDogImlzIFtTQ1JFRU5dID8iLA0KICAgICAgICAgICAgZGlzYWJsZU1vbml0b3I6IHRydWUsDQogICAgICAgICAgICBhcmd1bWVudHM6IHsNCiAgICAgICAgICAgICAgU0NSRUVOOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlNDUkVFTlMiIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogInNjcmVlbk9mZiIsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLA0KICAgICAgICAgICAgdGV4dDogInN0YWdlIHNpemUgb2Zmc2V0Ig0KICAgICAgICAgIH0sDQogICAgICAgICAgIi0tLSIsDQogICAgICAgICAgew0KICAgICAgICAgICAgb3Bjb2RlOiAiYXZlcmFnZU1pY3JvcGhvbmVMb3VkbmVzcyIsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLA0KICAgICAgICAgICAgdGV4dDogImF2ZXJhZ2UgbG91ZG5lc3MiDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICJnZXRTcHJpdGVOYW1lIiwNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsDQogICAgICAgICAgICB0ZXh0OiAibXkgc3ByaXRlIG5hbWUiDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICJhbGxMYXllcnMiLA0KICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwNCiAgICAgICAgICAgIHRleHQ6ICJtYXggc3ByaXRlIGxheWVycyINCiAgICAgICAgICB9LA0KICAgICAgICAgICItLS0iLA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogInNwcml0ZURyYWdNb2RlIiwNCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwNCiAgICAgICAgICAgIHRleHQ6ICJzZXQgZHJhZyBtb2RlIG9mIFtTUFJJVEVdIHRvIFtEUkFHXSIsDQogICAgICAgICAgICBhcmd1bWVudHM6IHsNCiAgICAgICAgICAgICAgU1BSSVRFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlRBUkdFVFMzIiB9LA0KICAgICAgICAgICAgICBEUkFHOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkRSQUdfTU9ERVMiIH0NCiAgICAgICAgICAgIH0sDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICJzcHJpdGVEcmFnZ2luZyIsDQogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkJPT0xFQU4sDQogICAgICAgICAgICB0ZXh0OiAiaXMgW1NQUklURV0gW0RSQUddID8iLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7DQogICAgICAgICAgICAgIFNQUklURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJUQVJHRVRTMyIgfSwNCiAgICAgICAgICAgICAgRFJBRzogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJEUkFHX1RZUEUiIH0NCiAgICAgICAgICAgIH0sDQogICAgICAgICAgfSwNCiAgICAgICAgICAvLyBEZXByZWNpYXRlZA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG9wY29kZTogInRvZ2dsZU1pY3JvcGhvbmUiLCBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsDQogICAgICAgICAgICB0ZXh0OiAidG9nZ2xlIG1pY3JvcGhvbmUgdG8gW1NUQVRFXSIsIGhpZGVGcm9tUGFsZXR0ZTogdHJ1ZSwNCiAgICAgICAgICAgIGFyZ3VtZW50czogeyBTVEFURTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcgfSB9DQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBvcGNvZGU6ICJtb25pdG9yU2Nyb2xsV2hlZWxMaW1pdGVkIiwgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwNCiAgICAgICAgICAgIHRleHQ6ICJzY3JvbGwgd2hlZWwgZGlzdGFuY2UgbGltaXRlZCBmcm9tIFtNSU5dIHRvIFtNQVhdIiwgaGlkZUZyb21QYWxldHRlOiB0cnVlLA0KICAgICAgICAgICAgYXJndW1lbnRzOiB7IE1JTjogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMCB9LCBNQVg6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDEwMCB9IH0sDQogICAgICAgICAgfQ0KICAgICAgICBdLA0KICAgICAgICBtZW51czogew0KICAgICAgICAgIFRBUkdFVFM6IHsgYWNjZXB0UmVwb3J0ZXJzOiB0cnVlLCBpdGVtczogdGhpcy5fZ2V0VGFyZ2V0cyh0cnVlLCBmYWxzZSkgfSwNCiAgICAgICAgICBUQVJHRVRTMjogeyBhY2NlcHRSZXBvcnRlcnM6IHRydWUsIGl0ZW1zOiB0aGlzLl9nZXRUYXJnZXRzKHRydWUsIHRydWUpIH0sDQogICAgICAgICAgVEFSR0VUUzM6IHsgYWNjZXB0UmVwb3J0ZXJzOiB0cnVlLCBpdGVtczogdGhpcy5fZ2V0VGFyZ2V0cyhmYWxzZSwgdHJ1ZSkgfSwNCiAgICAgICAgICBUQVJHRVRTNDogeyBhY2NlcHRSZXBvcnRlcnM6IHRydWUsIGl0ZW1zOiB0aGlzLl9nZXRUYXJnZXRzKGZhbHNlLCBmYWxzZSkgfSwNCiAgICAgICAgICBMSVNUUzogeyBhY2NlcHRSZXBvcnRlcnM6IHRydWUsIGl0ZW1zOiAiZ2V0TGlzdHMiIH0sDQogICAgICAgICAgU0NSRUVOUzogWyJmdWxsc2NyZWVuIiwgInNtYWxsc2NyZWVuIl0sDQogICAgICAgICAgSU5QVVRTOiBbInRleHQiLCAicGFzc3dvcmQiLCAibnVtYmVyIiwgImNvbG9yIl0sDQogICAgICAgICAgQXNraW5nOiBbInN0YWdlIiwgInNwcml0ZSJdLA0KICAgICAgICAgIHNob3VsZFdhaXQ6IFsid2FpdCIsICJjb250aW51ZSJdLA0KICAgICAgICAgIFNDUk9MTF9FVkVOVFM6IFsidXAiLCAiZG93biJdLA0KICAgICAgICAgIERSQUdfVFlQRTogWyJkcmFnZ2FibGUiLCAiYmVpbmcgZHJhZ2dlZCJdLA0KICAgICAgICAgIERSQUdfTU9ERVM6IHsgYWNjZXB0UmVwb3J0ZXJzOiB0cnVlLCBpdGVtczogWyJkcmFnZ2FibGUiLCAibm90IGRyYWdnYWJsZSJdIH0sDQogICAgICAgICAgc3RyaW5nX3R5cGVzOiB7IGFjY2VwdFJlcG9ydGVyczogdHJ1ZSwgaXRlbXM6IFsibnVtYmVycyIsICJsZXR0ZXJzIiwgInNwZWNpYWwgY2hhcmFjdGVycyJdIH0sDQogICAgICAgICAga2V5czogew0KICAgICAgICAgICAgYWNjZXB0UmVwb3J0ZXJzOiB0cnVlLA0KICAgICAgICAgICAgaXRlbXM6IFsNCiAgICAgICAgICAgICAgIkFueSIsICJBIiwgIkIiLCAiQyIsICJEIiwgIkUiLCAiRiIsICJHIiwgIkgiLCAiSSIsICJKIiwNCiAgICAgICAgICAgICAgIksiLCAiTCIsICJNIiwgIk4iLCAiTyIsICJQIiwgIlEiLCAiUiIsICJTIiwgIlQiLA0KICAgICAgICAgICAgICAiVSIsICJWIiwgIlciLCAiWCIsICJZIiwgIloiLA0KICAgICAgICAgICAgICAiMCIsICIxIiwgIjIiLCAiMyIsICI0IiwgIjUiLCAiNiIsICI3IiwgIjgiLCAiOSIsDQogICAgICAgICAgICAgICJVcCBBcnJvdyIsICJEb3duIEFycm93IiwgIkxlZnQgQXJyb3ciLCAiUmlnaHQgQXJyb3ciLA0KICAgICAgICAgICAgICAiU3BhY2UiLCAiRW50ZXIiLCAiU2hpZnQiLCAiQ29udHJvbCIsICJBbHQiLCAiRXNjYXBlIiwNCiAgICAgICAgICAgICAgIkJhY2tzcGFjZSIsICJUYWIiLCAiQ2FwcyBMb2NrIiwNCiAgICAgICAgICAgICAgIkluc2VydCIsICJQYWdlIFVwIiwgIlBhZ2UgRG93biINCiAgICAgICAgICAgIF0NCiAgICAgICAgICB9LA0KICAgICAgICAgIG1vdXNlQnV0dG9uczogew0KICAgICAgICAgICAgYWNjZXB0UmVwb3J0ZXJzOiB0cnVlLA0KICAgICAgICAgICAgaXRlbXM6IFsNCiAgICAgICAgICAgICAgeyB0ZXh0OiAibGVmdCIsIHZhbHVlOiAiMCIgfSwNCiAgICAgICAgICAgICAgeyB0ZXh0OiAic2Nyb2xsIHdoZWVsIiwgdmFsdWU6ICIxIiB9LA0KICAgICAgICAgICAgICB7IHRleHQ6ICJyaWdodCIsIHZhbHVlOiAiMiIgfSwNCiAgICAgICAgICAgICAgeyB0ZXh0OiAiYmFjayIsIHZhbHVlOiAiMyIgfSwgeyB0ZXh0OiAiZm93YXJkIiwgdmFsdWU6ICI0IiB9DQogICAgICAgICAgICBdLA0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfTsNCiAgICB9DQoNCiAgICAvLyBIZWxwZXIgRnVuY3MNCiAgICBfZ2V0VGFyZ2V0cyhtb3VzZSwgbXlzZWxmKSB7DQogICAgICBjb25zdCBzcHJpdGVOYW1lcyA9IFtdOw0KICAgICAgaWYgKG1vdXNlKSB7IHNwcml0ZU5hbWVzLnB1c2goeyB0ZXh0OiAibW91c2UtcG9pbnRlciIsIHZhbHVlOiAiX21vdXNlXyIgfSkgfQ0KICAgICAgaWYgKG15c2VsZikgeyBzcHJpdGVOYW1lcy5wdXNoKHsgdGV4dDogIm15c2VsZiIsIHZhbHVlOiAiX215c2VsZl8iIH0pIH0NCiAgICAgIGNvbnN0IHRhcmdldHMgPSBydW50aW1lLnRhcmdldHM7DQogICAgICBmb3IgKGxldCBpbmRleCA9IDE7IGluZGV4IDwgdGFyZ2V0cy5sZW5ndGg7IGluZGV4KyspIHsNCiAgICAgICAgY29uc3QgdGFyZ2V0ID0gdGFyZ2V0c1tpbmRleF07DQogICAgICAgIGlmICh0YXJnZXQuaXNPcmlnaW5hbCkgew0KICAgICAgICAgIGNvbnN0IHRhcmdldE5hbWUgPSB0YXJnZXQuZ2V0TmFtZSgpOw0KICAgICAgICAgIHNwcml0ZU5hbWVzLnB1c2goeyB0ZXh0OiB0YXJnZXROYW1lLCB2YWx1ZTogdGFyZ2V0TmFtZSB9KTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIHNwcml0ZU5hbWVzLmxlbmd0aCA+IDAgPyBzcHJpdGVOYW1lcyA6IFsiIl07DQogICAgfQ0KDQogICAgZ2V0TGlzdHMoKSB7DQogICAgICB0cnkgew0KICAgICAgICBjb25zdCBnbG9iYWxMaXN0cyA9IE9iamVjdC52YWx1ZXMocnVudGltZS5nZXRUYXJnZXRGb3JTdGFnZSgpLnZhcmlhYmxlcykuZmlsdGVyKCh4KSA9PiB4LnR5cGUgPT0gImxpc3QiKTsNCiAgICAgICAgY29uc3QgbG9jYWxMaXN0cyA9IE9iamVjdC52YWx1ZXModm0uZWRpdGluZ1RhcmdldC52YXJpYWJsZXMpLmZpbHRlcigoeCkgPT4geC50eXBlID09ICJsaXN0Iik7DQogICAgICAgIGNvbnN0IGxpc3RNZW51ID0gWy4uLm5ldyBTZXQoWy4uLmdsb2JhbExpc3RzLCAuLi5sb2NhbExpc3RzXSldOw0KICAgICAgICBpZiAobGlzdE1lbnUubGVuZ3RoID09PSAwKSByZXR1cm4gW3sgdGV4dDogIm1ha2UgYSBsaXN0IiwgdmFsdWU6ICJtYWtlIGEgbGlzdCIgfV07DQogICAgICAgIHJldHVybiBsaXN0TWVudS5tYXAoKGkpID0+ICh7IHRleHQ6IGkubmFtZSwgdmFsdWU6IGkuaWQgfSkpOw0KICAgICAgfSBjYXRjaCB7IHJldHVybiBbIm1ha2UgYSBsaXN0Il0gfQ0KICAgIH0NCg0KICAgIGxvb2s0TGlzdChsaXN0LCB1dGlsKSB7DQogICAgICBjb25zdCBpZCA9IHV0aWwudGFyZ2V0Lmxvb2t1cFZhcmlhYmxlQnlJZChsaXN0KTsNCiAgICAgIGlmIChpZCAmJiBpZC50eXBlID09PSAibGlzdCIpIHJldHVybiBpZC52YWx1ZTsNCiAgICAgIGVsc2Ugew0KICAgICAgICBjb25zdCBuYW1lID0gdXRpbC50YXJnZXQubG9va3VwVmFyaWFibGVCeU5hbWVBbmRUeXBlKGxpc3QsICJsaXN0Iik7DQogICAgICAgIHJldHVybiBuYW1lID8gbmFtZS52YWx1ZSA6IFsidW5kZWZpbmVkIGxpc3QiXTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICBoYW5kbGVTY3JvbGwgPSAoZXZlbnQpID0+IHsNCiAgICAgIHNjcm9sbERpc3QgKz0gZXZlbnQuZGVsdGFZOw0KICAgICAgb2xkU2Nyb2xsWzJdID0gZXZlbnQuZGVsdGFZOw0KICAgICAgaWYgKHRoaXMuc2Nyb2xsV2hlZWxCb29sKHsgRVZFTlQ6InVwIiwgU0VDUkVUOiB0cnVlIH0pKSBydW50aW1lLnN0YXJ0SGF0cygiSHlwZXJTZW5zZVNQX3Njcm9sbFdoZWVsSGF0Iik7DQogICAgICBpZiAodGhpcy5zY3JvbGxXaGVlbEJvb2woeyBFVkVOVDoiZG93biIsIFNFQ1JFVDogdHJ1ZSB9KSkgcnVudGltZS5zdGFydEhhdHMoIkh5cGVyU2Vuc2VTUF9zY3JvbGxXaGVlbEhhdDIiKTsNCiAgICB9Ow0KDQogICAga2V5SGFuZGxlcihrZXksIGxvb3ApIHsNCiAgICAgIGlmIChrZXkgPT09ICJBbnkiKSB7DQogICAgICAgIGlmIChjdXJQcmVzc0tleSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlOw0KICAgICAgICBrZXkgPSBjdXJQcmVzc0tleTsNCiAgICAgIH0NCiAgICAgIGlmIChpc05hTihwYXJzZUZsb2F0KGtleSkpKSBrZXkgPSBrZXkudG9VcHBlckNhc2UoKTsNCiAgICAgIGxldCBwcmVzc2VkS2V5ID0gdGhpcy5jdXJyZW50S2V5KCkudG9VcHBlckNhc2UoKTsNCiAgICAgIGlmIChwcmVzc2VkS2V5ICE9PSAiICIpIHByZXNzZWRLZXkgPSBwcmVzc2VkS2V5LnJlcGxhY2VBbGwoIiAiLCAiIik7DQogICAgICBpZiAoDQogICAgICAgICgoa2V5ID09PSAiU1BBQ0UiICYmIHByZXNzZWRLZXkgPT09ICIgIikgfHwga2V5ID09PSBwcmVzc2VkS2V5IHx8DQogICAgICAgIChrZXkuc3RhcnRzV2l0aCgiRElHSVQiKSAmJiBrZXkuc2xpY2UoNSkgPT09IHByZXNzZWRLZXkpKQ0KICAgICAgKSB7DQogICAgICAgIGtleSA9IChrZXkgPT09ICJTUEFDRSIpID8gIiAiIDoga2V5Ow0KICAgICAgICByZXR1cm4gbG9vcCA/IHRydWUgOiBwcmVzc2VkS2V5c1trZXldIDw9IDAuMTsNCiAgICAgIH0NCiAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICBjb2xvclRvdWNoaW5nKHgsIHkpIHsNCiAgICAgIGNvbnN0IGNsaWVudFggPSBNYXRoLnJvdW5kKCgoKHJ1bnRpbWUuc3RhZ2VXaWR0aCAvIDIpICsgeCkgLyBydW50aW1lLnN0YWdlV2lkdGgpICogcmVuZGVyLl9nbC5jYW52YXMuY2xpZW50V2lkdGgpOw0KICAgICAgY29uc3QgY2xpZW50WSA9IE1hdGgucm91bmQoKCgocnVudGltZS5zdGFnZUhlaWdodCAvIDIpIC0geSkgLyBydW50aW1lLnN0YWdlSGVpZ2h0KSAqIHJlbmRlci5fZ2wuY2FudmFzLmNsaWVudEhlaWdodCk7DQogICAgICBjb25zdCByZ2IgPSByZW5kZXIuZXh0cmFjdENvbG9yKGNsaWVudFgsIGNsaWVudFksIDIwKS5jb2xvcjsNCiAgICAgIHJldHVybiBgIyR7cmdiLnIudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICIwIil9JHtyZ2IuZy50b1N0cmluZygxNikucGFkU3RhcnQoMiwgIjAiKX0ke3JnYi5iLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAiMCIpfWA7DQogICAgfQ0KDQogICAgLy8gQmxvY2sgRnVuY3MNCiAgICBtb25pdG9yU2Nyb2xsV2hlZWwoKSB7IHJldHVybiBzY3JvbGxEaXN0IH0NCiAgICBzY3JvbGxWZWwoKSB7IHJldHVybiBvbGRTY3JvbGxbMl0gKiAtMSB9DQoNCiAgICBzZXRTY3JvbGxEaXN0YW5jZShhcmdzKSB7IHNjcm9sbERpc3QgPSBTY3JhdGNoLkNhc3QudG9OdW1iZXIoYXJncy5ESVNUQU5DRSkgfQ0KICAgIGNoYW5nZVNjcm9sbERpc3RhbmNlKGFyZ3MpIHsgc2Nyb2xsRGlzdCArPSBTY3JhdGNoLkNhc3QudG9OdW1iZXIoYXJncy5ESVNUQU5DRSkgfQ0KDQogICAgc2Nyb2xsV2hlZWxCb29sKGFyZ3MpIHsNCiAgICAgIGNvbnN0IGkgPSBhcmdzLlNFQ1JFVCA/IDAgOiAxOw0KICAgICAgY29uc3Qgc3RhdHVzID0gYXJncy5FVkVOVCA9PT0gImRvd24iID8gc2Nyb2xsRGlzdCA+IG9sZFNjcm9sbFtpXSA6IHNjcm9sbERpc3QgPCBvbGRTY3JvbGxbaV07DQogICAgICBpZiAoc3RhdHVzKSBvbGRTY3JvbGxbaV0gPSBzY3JvbGxEaXN0Ow0KICAgICAgcmV0dXJuIFNjcmF0Y2guQ2FzdC50b0Jvb2xlYW4oc3RhdHVzKTsNCiAgICB9DQoNCiAgICBtb3VzZUNsaWNrKGFyZ3MsIHV0aWwpIHsgcmV0dXJuIHV0aWwuaW9RdWVyeSgibW91c2UiLCAiZ2V0QnV0dG9uSXNEb3duIiwgW1NjcmF0Y2guQ2FzdC50b051bWJlcihhcmdzLkJVVFRPTildKSB9DQogICAgcmVhbFgoKSB7IHJldHVybiBtb3VzZVBvc1swXSB9DQogICAgcmVhbFkoKSB7IHJldHVybiBtb3VzZVBvc1sxXSB9DQoNCiAgICBpc0tleUhpdChhcmdzKSB7IHJldHVybiB0aGlzLmtleUhhbmRsZXIoU2NyYXRjaC5DYXN0LnRvU3RyaW5nKGFyZ3MuS0VZKS5yZXBsYWNlKCIgIiwgIiIpLCBmYWxzZSkgfQ0KICAgIHdoZW5LZXlIaXQoYXJncykgeyByZXR1cm4gdGhpcy5rZXlIYW5kbGVyKFNjcmF0Y2guQ2FzdC50b1N0cmluZyhhcmdzLktFWSkucmVwbGFjZSgiICIsICIiKSwgZmFsc2UpIH0NCg0KICAgIHdoZW5LZXlQcmVzc2VkKGFyZ3MpIHsgcmV0dXJuIHRoaXMua2V5SGFuZGxlcihTY3JhdGNoLkNhc3QudG9TdHJpbmcoYXJncy5LRVkpLnJlcGxhY2UoIiAiLCAiIiksIHRydWUpIH0NCiAgICBpc0tleVByZXNzZWQoYXJncykgeyByZXR1cm4gdGhpcy5rZXlIYW5kbGVyKFNjcmF0Y2guQ2FzdC50b1N0cmluZyhhcmdzLktFWSkucmVwbGFjZSgiICIsICIiKSwgdHJ1ZSkgfQ0KDQogICAgY3VycmVudEtleSgpIHsNCiAgICAgIGlmIChjdXJQcmVzc0tleSA9PT0gbnVsbCkgcmV0dXJuICJObyBLZXlzIFByZXNzZWQiOw0KICAgICAgZWxzZSBpZiAoY3VyUHJlc3NLZXkuaW5jbHVkZXMoIkFSUk9XIikgfHwgY3VyUHJlc3NLZXkgPT09ICJDQVBTTE9DSyIpIHsNCiAgICAgICAgcmV0dXJuIChjdXJQcmVzc0tleSA9PT0gIkNBUFNMT0NLIikgPyAiQ2FwcyBMb2NrIiA6IGAkeyBjdXJQcmVzc0tleS5jaGFyQXQoNSkudG9VcHBlckNhc2UoKSArIGN1clByZXNzS2V5LnNsaWNlKDYpLnRvTG93ZXJDYXNlKCkgfSBBcnJvd2A7DQogICAgICB9DQogICAgICByZXR1cm4gY3VyUHJlc3NLZXkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjdXJQcmVzc0tleS5zbGljZSgxKS50b0xvd2VyQ2FzZSgpOw0KICAgIH0NCg0KICAgIGN1cnJlbnRLZXlzKCkgew0KICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KE9iamVjdC5rZXlzKHByZXNzZWRLZXlzKS5tYXAoKGtleSkgPT4gew0KICAgICAgICBpZiAoa2V5LmluY2x1ZGVzKCJBUlJPVyIpIHx8IGtleSA9PT0gIkNBUFNMT0NLIikgcmV0dXJuIChrZXkgPT09ICJDQVBTTE9DSyIpID8gIkNhcHMgTG9jayIgOiBgJHtrZXkuY2hhckF0KDUpLnRvVXBwZXJDYXNlKCkgKyBrZXkuc2xpY2UoNikudG9Mb3dlckNhc2UoKX0gQXJyb3dgOw0KICAgICAgICByZXR1cm4ga2V5LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsga2V5LnNsaWNlKDEpLnRvTG93ZXJDYXNlKCk7DQogICAgICB9KSk7DQogICAgfQ0KDQogICAgdGltZUtleVByZXNzZWQoYXJncykgew0KICAgICAgbGV0IGtleSA9IFNjcmF0Y2guQ2FzdC50b1N0cmluZyhhcmdzLktFWSkucmVwbGFjZSgiICIsICIiKTsNCiAgICAgIGlmIChpc05hTihwYXJzZUZsb2F0KGtleSkpKSBrZXkgPSBrZXkudG9VcHBlckNhc2UoKTsNCiAgICAgIGlmIChrZXkgPT09ICJTUEFDRSIpIGtleSA9ICIgIjsNCiAgICAgIGlmIChhcmdzLktFWSA9PT0gIkFueSIpIHJldHVybiBNYXRoLm1heCgwLCAuLi5PYmplY3QudmFsdWVzKHByZXNzZWRLZXlzKSk7DQogICAgICBlbHNlIHJldHVybiBwcmVzc2VkS2V5c1trZXldID8/IDA7DQogICAgfQ0KDQogICAgc3ByaXRlUG9pbnRpbmcoYXJncywgdXRpbCkgew0KICAgICAgY29uc3QgdGFyZ2V0ID0gYXJncy5TUFJJVEUxID09PSAiX215c2VsZl8iID8gdXRpbC50YXJnZXQgOiBydW50aW1lLmdldFNwcml0ZVRhcmdldEJ5TmFtZShhcmdzLlNQUklURTEpOw0KICAgICAgaWYgKCF0YXJnZXQpIHJldHVybiBmYWxzZTsNCiAgICAgIGNvbnN0IG9sZERpciA9IHRhcmdldC5kaXJlY3Rpb247DQogICAgICBydW50aW1lLmV4dF9zY3JhdGNoM19tb3Rpb24ucG9pbnRUb3dhcmRzKHsgVE9XQVJEUyA6IGFyZ3MuU1BSSVRFMiB9LCB7IC4uLnV0aWwsIHRhcmdldCwgaW9RdWVyeSA6IHV0aWwuaW9RdWVyeSB9KTsNCiAgICAgIGNvbnN0IG5ld0RpciA9IHRhcmdldC5kaXJlY3Rpb247DQogICAgICB0YXJnZXQuc2V0RGlyZWN0aW9uKG9sZERpcik7DQogICAgICByZXR1cm4gTWF0aC5yb3VuZChuZXdEaXIpID09PSBNYXRoLnJvdW5kKG9sZERpcik7DQogICAgfQ0KDQogICAgc3ByaXRlVG91Y2hpbmdTcHJpdGUoYXJncywgdXRpbCkgew0KICAgICAgY29uc3Qgc3ByaXRlMiA9IGFyZ3MuU1BSSVRFMjsNCiAgICAgIGNvbnN0IHRhcmdldCA9IHNwcml0ZTIgPT09ICJfbXlzZWxmXyIgPyB1dGlsLnRhcmdldCA6IHJ1bnRpbWUuZ2V0U3ByaXRlVGFyZ2V0QnlOYW1lKHNwcml0ZTIpOw0KICAgICAgaWYgKCF0YXJnZXQpIHJldHVybiBmYWxzZTsNCiAgICAgIHJldHVybiB0YXJnZXQuaXNUb3VjaGluZ09iamVjdChhcmdzLlNQUklURTEpOw0KICAgIH0NCg0KICAgIHNwcml0ZVRvdWNoaW5nQ2xvbmUoYXJncywgdXRpbCkgew0KICAgICAgY29uc3QgdGFyZ2V0MSA9IGFyZ3MuU1BSSVRFMSA9PT0gIl9teXNlbGZfIiA/IHV0aWwudGFyZ2V0IDogcnVudGltZS5nZXRTcHJpdGVUYXJnZXRCeU5hbWUoYXJncy5TUFJJVEUxKTsNCiAgICAgIGNvbnN0IHRhcmdldDIgPSBydW50aW1lLmdldFNwcml0ZVRhcmdldEJ5TmFtZShhcmdzLlNQUklURTIpOw0KICAgICAgaWYgKCF0YXJnZXQxIHx8ICF0YXJnZXQyKSByZXR1cm4gZmFsc2U7DQogICAgICBjb25zdCBjbG9uZXMgPSB0YXJnZXQyLnNwcml0ZS5jbG9uZXM7DQogICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGNsb25lcy5sZW5ndGg7IGkrKykgew0KICAgICAgICBpZiAoY2xvbmVzW2ldKSB7DQogICAgICAgICAgY29uc3QgdmFyaWFibGUgPSBjbG9uZXNbaV0ubG9va3VwVmFyaWFibGVCeU5hbWVBbmRUeXBlKGFyZ3MuVkFSLCAiIiwgY2xvbmVzW2ldKTsNCiAgICAgICAgICBpZiAodmFyaWFibGUgJiYgU2NyYXRjaC5DYXN0LnRvU3RyaW5nKHZhcmlhYmxlLnZhbHVlKSA9PT0gU2NyYXRjaC5DYXN0LnRvU3RyaW5nKGFyZ3MuVkFMKSkgew0KICAgICAgICAgICAgaWYgKHJlbmRlci5pc1RvdWNoaW5nRHJhd2FibGVzKHRhcmdldDEuZHJhd2FibGVJRCwgW2Nsb25lc1tpXS5kcmF3YWJsZUlEXSkpIHJldHVybiB0cnVlOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KICAgIHNwcml0ZUN1cnJlbnRUb3VjaGluZyhhcmdzLCB1dGlsKSB7DQogICAgICBjb25zdCBsaXN0ID0gW107DQogICAgICBjb25zdCB0aGlzU3ByaXRlID0gYXJncy5TUFJJVEUgPT09ICJfbW91c2VfIiA/ICJfbW91c2VfIiA6IGFyZ3MuU1BSSVRFID09PSAiX215c2VsZl8iID8gdXRpbC50YXJnZXQuZ2V0TmFtZSgpIDogYXJncy5TUFJJVEU7DQogICAgICBjb25zdCB0YXJnZXRzID0gcnVudGltZS50YXJnZXRzOw0KICAgICAgZm9yIChsZXQgaW5kZXggPSAxOyBpbmRleCA8IHRhcmdldHMubGVuZ3RoOyBpbmRleCsrKSB7DQogICAgICAgIGNvbnN0IHRhcmdldCA9IHRhcmdldHNbaW5kZXhdOw0KICAgICAgICBjb25zdCBuYW1lID0gYCR7dGFyZ2V0LmdldE5hbWUoKX0ke3RhcmdldC5pc09yaWdpbmFsID8gIiIgOiAiIChDbG9uZSkifWA7DQogICAgICAgIGlmICh0YXJnZXQuaXNUb3VjaGluZ09iamVjdCh0aGlzU3ByaXRlKSAmJiBuYW1lICE9PSB0aGlzU3ByaXRlKSBsaXN0LnB1c2gobmFtZSk7DQogICAgICB9DQogICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkobGlzdCk7DQogICAgfQ0KDQogICAgZ2V0TmVpZ2hib3JzKGFyZ3MsIHV0aWwpIHsNCiAgICAgIGNvbnN0IGNpcmMgPSBTY3JhdGNoLkNhc3QudG9OdW1iZXIoYXJncy5ESUFNRVRFUik7DQogICAgICBsZXQgbGlzdCA9IFtdLCBwb3MgPSBbXTsNCiAgICAgIGlmIChhcmdzLlNQUklURSA9PT0gIl9tb3VzZV8iKSBwb3MgPSBbdXRpbC5pb1F1ZXJ5KCJtb3VzZSIsICJnZXRTY3JhdGNoWCIpLCB1dGlsLmlvUXVlcnkoIm1vdXNlIiwgImdldFNjcmF0Y2hZIiksICIiXTsNCiAgICAgIGVsc2UgaWYgKGFyZ3MuU1BSSVRFID09PSAiX215c2VsZl8iKSBwb3MgPSBbdXRpbC50YXJnZXQueCwgdXRpbC50YXJnZXQueSwgdXRpbC50YXJnZXQuaWRdOw0KICAgICAgZWxzZSB7DQogICAgICAgIGNvbnN0IG5hbWVUYXJnZXQgPSBydW50aW1lLmdldFNwcml0ZVRhcmdldEJ5TmFtZShhcmdzLlNQUklURSk7DQogICAgICAgIGlmICghbmFtZVRhcmdldCkgcmV0dXJuICJbXSI7DQogICAgICAgIHBvcyA9IFtuYW1lVGFyZ2V0LngsIG5hbWVUYXJnZXQueSwgbmFtZVRhcmdldC5pZF07DQogICAgICB9DQogICAgICBjb25zdCB0YXJnZXRzID0gcnVudGltZS50YXJnZXRzOw0KICAgICAgZm9yIChsZXQgaW5kZXggPSAxOyBpbmRleCA8IHRhcmdldHMubGVuZ3RoOyBpbmRleCsrKSB7DQogICAgICAgIGNvbnN0IHRhcmdldCA9IHRhcmdldHNbaW5kZXhdOw0KICAgICAgICBjb25zdCBkeCA9IHBvc1swXSAtIHRhcmdldC54Ow0KICAgICAgICBjb25zdCBkeSA9IHBvc1sxXSAtIHRhcmdldC55Ow0KICAgICAgICBpZiAoTWF0aC5zcXJ0KChkeCAqIGR4KSArIChkeSAqIGR5KSkgPD0gY2lyYyAmJiB0YXJnZXQuaWQgIT09IHBvc1syXSkgbGlzdC5wdXNoKGAke3RhcmdldC5nZXROYW1lKCl9JHt0YXJnZXQuaXNPcmlnaW5hbCA/ICIiIDogIiAoQ2xvbmUpIn1gKTsNCiAgICAgIH0NCiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShsaXN0KTsNCiAgICB9DQoNCiAgICBjb2xvckF0UG9zaXRpb24oYXJncykgeyByZXR1cm4gdGhpcy5jb2xvclRvdWNoaW5nKFNjcmF0Y2guQ2FzdC50b051bWJlcihhcmdzLngpLCBTY3JhdGNoLkNhc3QudG9OdW1iZXIoYXJncy55KSkgfQ0KICAgIGNvbG9yVG91Y2hpbmdTcHJpdGUoYXJncywgdXRpbCkgew0KICAgICAgaWYgKGFyZ3MuU1BSSVRFID09PSAiX21vdXNlXyIpIHJldHVybiB0aGlzLmNvbG9yVG91Y2hpbmcodXRpbC5pb1F1ZXJ5KCJtb3VzZSIsICJnZXRTY3JhdGNoWCIpLCB1dGlsLmlvUXVlcnkoIm1vdXNlIiwgImdldFNjcmF0Y2hZIikpOw0KICAgICAgZWxzZSB7DQogICAgICAgIGNvbnN0IHRhcmdldCA9IGFyZ3MuU1BSSVRFID09PSAiX215c2VsZl8iID8gdXRpbC50YXJnZXQgOiBydW50aW1lLmdldFNwcml0ZVRhcmdldEJ5TmFtZShhcmdzLlNQUklURSk7DQogICAgICAgIGlmICghdGFyZ2V0KSByZXR1cm4gIiI7DQogICAgICAgIGNvbnN0IHdhc1Zpc2libGUgPSB0YXJnZXQudmlzaWJsZTsNCiAgICAgICAgdGFyZ2V0LnNldFZpc2libGUoZmFsc2UpOw0KICAgICAgICBjb25zdCBoZXggPSB0aGlzLmNvbG9yVG91Y2hpbmcodGFyZ2V0LngsIHRhcmdldC55KTsNCiAgICAgICAgdGFyZ2V0LnNldFZpc2libGUod2FzVmlzaWJsZSk7DQogICAgICAgIHJldHVybiBoZXg7DQogICAgICB9DQogICAgfQ0KDQogICAgYm9vbGVhbihhcmdzKSB7IHJldHVybiAoU2NyYXRjaC5DYXN0LnRvQm9vbGVhbihhcmdzLlNUUklORykgJiYgYXJncy5TVFJJTkcgIT09IHVuZGVmaW5lZCkgfQ0KDQogICAgZ2V0QWxsU3RyaW5nKGFyZ3MpIHsNCiAgICAgIGxldCByZWdleDsNCiAgICAgIHN3aXRjaCAoYXJncy5URVhUKSB7DQogICAgICAgIGNhc2UgIm51bWJlcnMiOiB7cmVnZXggPSAvW14wLTldL2c7IGJyZWFrIH0NCiAgICAgICAgY2FzZSAic3BlY2lhbCBjaGFyYWN0ZXJzIjoge3JlZ2V4ID0gL1tBLVphLXowLTldL2c7IGJyZWFrIH0NCiAgICAgICAgZGVmYXVsdDogcmVnZXggPSAvW15BLVphLXpdL2c7DQogICAgICB9DQogICAgICByZXR1cm4gYXJncy5TVFJJTkcucmVwbGFjZShyZWdleCwgIiIpOw0KICAgIH0NCg0KICAgIGFkdmFuY2VkQXNrKGFyZ3MsIHV0aWwpIHsNCiAgICAgIGNvbnN0IHdhc1Zpc2libGUgPSB1dGlsLnRhcmdldC52aXNpYmxlOw0KICAgICAgaWYgKCF1dGlsLnRhcmdldC5pc1N0YWdlICYmIGFyZ3MuVEhJTkcgPT09ICJzdGFnZSIpIHV0aWwudGFyZ2V0LnNldFZpc2libGUoZmFsc2UpOw0KICAgICAgYXNrQXMgPSBhcmdzLlRISU5HOw0KICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gew0KICAgICAgICBydW50aW1lLmV4dF9zY3JhdGNoM19zZW5zaW5nLmFza0FuZFdhaXQoYXJncywgdXRpbCk7DQogICAgICAgIGlmICghdXRpbC50YXJnZXQuaXNTdGFnZSAmJiB3YXNWaXNpYmxlKSB1dGlsLnRhcmdldC5zZXRWaXNpYmxlKHRydWUpOw0KICAgICAgICBpZiAocHVibGljVmFycy5hc2tTdHVmZikgdGhpcy5zZXRBdHQocHVibGljVmFycy5hc2tTdHVmZik7DQogICAgICAgIGlmIChwdWJsaWNWYXJzLmFza1R5cGUpIHRoaXMuc2V0QXNrVHlwZShwdWJsaWNWYXJzLmFza1R5cGUpOw0KICAgICAgICBpZiAoYXJncy5XQUlUID09PSAiY29udGludWUiKSByZXNvbHZlKCk7DQogICAgICAgIGVsc2UgcnVudGltZS5vbmNlKCJBTlNXRVIiLCAoKSA9PiB7IHJlc29sdmUoKSB9KTsNCiAgICAgIH0pOw0KICAgIH0NCiAgICBhZHZhbmNlZEFza1JlcG9ydGVyKGFyZ3MsIHV0aWwpIHsNCiAgICAgIHJldHVybiB0aGlzLmFkdmFuY2VkQXNrKGFyZ3MsIHV0aWwpLnRoZW4oKCkgPT4geyByZXR1cm4gcnVudGltZS5leHRfc2NyYXRjaDNfc2Vuc2luZy5nZXRBbnN3ZXIoKSB9KTsNCiAgICB9DQoNCiAgICBzdG9wQXNraW5nKCkgew0KICAgICAgcnVudGltZS5lbWl0KCJBTlNXRVIiLCB0aGlzLmN1cnJlbnRUeXBlZCgpKTsNCiAgICAgIHJ1bnRpbWUuZW1pdCgiUVVFU1RJT04iLCBudWxsKTsNCiAgICB9DQoNCiAgICBjdXJyZW50VHlwZWQoKSB7DQogICAgICBsZXQgYm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0eXBlb2Ygc2NhZmZvbGRpbmcgIT09ICJ1bmRlZmluZWQiID8gYGlucHV0W2NsYXNzPSJzYy1xdWVzdGlvbi1pbnB1dCJdYCA6IGBkaXZbY2xhc3MqPSJxdWVzdGlvbiJdIFtjbGFzc149ImlucHV0X2lucHV0LWZvcm0iXWApOw0KICAgICAgcmV0dXJuIGJveCA/IGJveC52YWx1ZSA6ICIiOw0KICAgIH0NCg0KICAgIGlzQXNraW5nKCkgeyByZXR1cm4gU2NyYXRjaC5DYXN0LnRvQm9vbGVhbihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBkaXZbY2xhc3MqPSJxdWVzdGlvbi1pbnB1dCJdYCkpIH0NCg0KICAgIHNldEF0dChhcmdzKSB7DQogICAgICBsZXQgYm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgZGl2W2NsYXNzKj0icXVlc3Rpb24iXWApOw0KICAgICAgaWYgKCFib3gpIHJldHVybiBwdWJsaWNWYXJzLmFza1N0dWZmID0gYXJnczsNCiAgICAgIGNvbnN0IGNhbnZhcyA9IGdldENvbXB1dGVkU3R5bGUocmVuZGVyLmNhbnZhcyk7DQogICAgICBpZiAoYXJncy53aWR0aCkgYm94LnN0eWxlLndpZHRoID0gYCR7YXJncy53aWR0aCAqIChwYXJzZUludChjYW52YXMud2lkdGgpIC8gNDgwKX1weGA7DQogICAgICBjb25zdCB4ID0gU2NyYXRjaC5DYXN0LnRvTnVtYmVyKGFyZ3MueCkgKyAocGFyc2VJbnQoY2FudmFzLndpZHRoKSAvIDIpIC0gKGFyZ3Mud2lkdGggKiAocGFyc2VJbnQoY2FudmFzLndpZHRoKSAvIDQ4MCkgLyAyKTsNCiAgICAgIGNvbnN0IHkgPSBTY3JhdGNoLkNhc3QudG9OdW1iZXIoYXJncy55KSArIChwYXJzZUludChjYW52YXMuaGVpZ2h0KSAvIDIpIC0gKGFza0FzID09PSAic3RhZ2UiID8gNTMgOiAzOSk7DQogICAgICBib3guc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgke3h9cHgsICR7eSAqIC0xfXB4KWA7DQogICAgfQ0KDQogICAgc2V0QXNrVHlwZShhcmdzKSB7DQogICAgICBsZXQgYm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0eXBlb2Ygc2NhZmZvbGRpbmcgIT09ICJ1bmRlZmluZWQiID8gYGlucHV0W2NsYXNzPSJzYy1xdWVzdGlvbi1pbnB1dCJdYCA6IGBkaXZbY2xhc3MqPSJxdWVzdGlvbiJdIFtjbGFzc149ImlucHV0X2lucHV0LWZvcm0iXWApOw0KICAgICAgaWYgKCFib3gpIHJldHVybiBwdWJsaWNWYXJzLmFza1R5cGUgPSBhcmdzOw0KICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJTUC1pbnB1dF9zZWxlY3QiKTsNCiAgICAgIGlmIChlbGVtZW50KSBib3gucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbGVtZW50KTsNCiAgICAgIGlmIChhcmdzLlRZUEUgPT09ICJkcm9wZG93biIpIHsNCiAgICAgICAgY29uc3Qgd2lkdGggPSBib3gucGFyZW50Tm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDsNCiAgICAgICAgbGV0IGRyb3Bkb3duID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2VsZWN0Iik7DQogICAgICAgIGRyb3Bkb3duLmlkID0gIlNQLWlucHV0X3NlbGVjdCI7DQogICAgICAgIGRyb3Bkb3duLnNldEF0dHJpYnV0ZSgic3R5bGUiLCBgYmFja2dyb3VuZDogI2ZmZjsgY29sb3I6ICM1MDUwNTA7IHdpZHRoOiAke3dpZHRoIC0gNDB9cHg7IGRpc3BsYXk6IGJsb2NrOyBib3JkZXItd2lkdGg6IDJweDsgYm9yZGVyLWNvbG9yOiAjRDlEOUQ5OyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgwcHgsM3B4KTtgKTsNCiAgICAgICAgYXJncy5MSVNULmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgbGV0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOw0KICAgICAgICAgIG9wdGlvbi52YWx1ZSA9IGl0ZW07IG9wdGlvbi50ZXh0ID0gaXRlbTsNCiAgICAgICAgICBkcm9wZG93bi5hcHBlbmRDaGlsZChvcHRpb24pOw0KICAgICAgICB9KTsNCiAgICAgICAgYm94LnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoZHJvcGRvd24pOw0KICAgICAgICBib3guc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgYm94LnZhbHVlID0gZHJvcGRvd24udmFsdWU7DQogICAgICAgIGRyb3Bkb3duLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsICgpID0+IHsgYm94LnZhbHVlID0gZHJvcGRvd24udmFsdWUgfSk7DQogICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYGJ1dHRvbltjbGFzcyo9InF1ZXN0aW9uLXN1Ym1pdC1idXR0b24iXWApOw0KICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoKSA9PiB7DQogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IHJ1bnRpbWUuZXh0X3NjcmF0Y2gzX3NlbnNpbmcuX2Fuc3dlciA9IGJveC52YWx1ZSB9LCAxMCk7DQogICAgICAgIH0pOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgYm94LnR5cGUgPSBhcmdzLlRZUEU7DQogICAgICAgIGJveC5wYXR0ZXJuID0gYXJncy5UWVBFID09PSAibnVtYmVyIiA/ICJbMC05XSoiIDogIm5vbmUiOw0KICAgICAgICBib3guc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICB9DQogICAgfQ0KICAgIHNldEFza1R5cGUyKGFyZ3MsIHV0aWwpIHsgdGhpcy5zZXRBc2tUeXBlKHsuLi5hcmdzLCBUWVBFIDogImRyb3Bkb3duIiwgTElTVCA6IHRoaXMubG9vazRMaXN0KGFyZ3MuVFlQRSwgdXRpbCkgfSkgfQ0KICAgIHNldEFza1R5cGUzKGFyZ3MsIHV0aWwpIHsNCiAgICAgIHRyeSB7DQogICAgICAgIGNvbnN0IGFycmF5ID0gSlNPTi5wYXJzZShhcmdzLlRZUEUpOw0KICAgICAgICBpZiAoYXJyYXkubGVuZ3RoID4gMCkgdGhpcy5zZXRBc2tUeXBlKHsuLi5hcmdzLCBUWVBFIDogImRyb3Bkb3duIiwgTElTVCA6IGFycmF5IH0pDQogICAgICB9IGNhdGNoIHt9DQogICAgfQ0KDQogICAgaXNTY3JlZW4oYXJncykgew0KICAgICAgY29uc3QgdmFsdWVzID0gW3JlbmRlci5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgsIHJ1bnRpbWUuc3RhZ2VXaWR0aF07DQogICAgICByZXR1cm4gYXJncy5TQ1JFRU4gPT09ICJmdWxsc2NyZWVuIiA/IHZhbHVlc1swXSA+IHZhbHVlc1sxXSA6IHZhbHVlc1swXSA8IHZhbHVlc1sxXTsNCiAgICB9DQogICAgc2NyZWVuT2ZmKCkgeyByZXR1cm4gcmVuZGVyLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCAvIHJ1bnRpbWUuc3RhZ2VXaWR0aCB9DQoNCiAgICBhdmVyYWdlTWljcm9waG9uZUxvdWRuZXNzKCkgew0KICAgICAgaWYgKGxvdWRuZXNzQXJyYXkubGVuZ3RoID49IDMwKSBsb3VkbmVzc0FycmF5ID0gW107DQogICAgICBsb3VkbmVzc0FycmF5LnB1c2gocnVudGltZS5leHRfc2NyYXRjaDNfc2Vuc2luZy5nZXRMb3VkbmVzcygpKTsNCiAgICAgIGxldCBzdW0gPSBsb3VkbmVzc0FycmF5LnJlZHVjZSgoYWNjdW11bGF0b3IsIGN1clZhbHVlKSA9PiBhY2N1bXVsYXRvciArIGN1clZhbHVlLCAwKTsNCiAgICAgIHJldHVybiBNYXRoLnJvdW5kKChzdW0gLyBsb3VkbmVzc0FycmF5Lmxlbmd0aCkgKiAxMDApIC8gMTAwOw0KICAgIH0NCg0KICAgIGdldFNwcml0ZU5hbWUoXywgdXRpbCkgeyByZXR1cm4gdXRpbC50YXJnZXQuZ2V0TmFtZSgpIH0NCg0KICAgIGFsbExheWVycygpIHsgcmV0dXJuIHJlbmRlci5fZHJhd0xpc3QubGVuZ3RoIC0gMSB9DQoNCiAgICBzcHJpdGVEcmFnTW9kZShhcmdzLCB1dGlsKSB7DQogICAgICBjb25zdCB0YXJnZXQgPSBhcmdzLlNQUklURSA9PT0gIl9teXNlbGZfIiA/IHV0aWwudGFyZ2V0IDogcnVudGltZS5nZXRTcHJpdGVUYXJnZXRCeU5hbWUoYXJncy5TUFJJVEUpOw0KICAgICAgaWYgKHRhcmdldCkgdGFyZ2V0LnNldERyYWdnYWJsZShhcmdzLkRSQUcgPT09ICJkcmFnZ2FibGUiKTsNCiAgICB9DQogICAgc3ByaXRlRHJhZ2dpbmcoYXJncywgdXRpbCkgew0KICAgICAgY29uc3QgdGFyZ2V0ID0gYXJncy5TUFJJVEUgPT09ICJfbXlzZWxmXyIgPyB1dGlsLnRhcmdldCA6IHJ1bnRpbWUuZ2V0U3ByaXRlVGFyZ2V0QnlOYW1lKGFyZ3MuU1BSSVRFKTsNCiAgICAgIGlmICh0YXJnZXQpIHJldHVybiB0YXJnZXRbYXJncy5EUkFHID09PSAiZHJhZ2dhYmxlIiA/ICJkcmFnZ2FibGUiIDogImRyYWdnaW5nIl07DQogICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgLy8gRGVwcmVjaWF0ZWQNCiAgICB0b2dnbGVNaWNyb3Bob25lKCkgeyBjb25zb2xlLndhcm4oIkRlcHJlY2lhdGVkIEJsb2NrIikgfQ0KICAgIG1vbml0b3JTY3JvbGxXaGVlbExpbWl0ZWQoYXJncykgeyByZXR1cm4gTWF0aC5tYXgoTWF0aC5taW4oc2Nyb2xsRGlzdCwgU2NyYXRjaC5DYXN0LnRvTnVtYmVyKGFyZ3MuTUFYKSksIFNjcmF0Y2guQ2FzdC50b051bWJlcihhcmdzLk1JTikpIH0NCiAgfQ0KDQogIFNjcmF0Y2guZXh0ZW5zaW9ucy5yZWdpc3RlcihuZXcgSHlwZXJTZW5zZVNQKCkpOw0KfSkoU2NyYXRjaCk7DQo=","https://extensions.turbowarp.org/text.js","https://extensions.turbowarp.org/Lily/ClonesPlus.js","data:text/javascript;base64,Ly8gTmFtZTogUmVuZGVyZXIgQ29udHJvbAovLyBJRDogU1ByZW5kZXJDb250cm9sCi8vIERlc2NyaXB0aW9uOiBDb250cm9sIFZpc3VhbHMgb2YgU3ByaXRlcywgQmFja2Ryb3BzLCBQZW4sIFZpZGVvLCBhbmQgTW9yZSEKLy8gQnk6IFNoYXJrUG9vbAoKLy8gVmVyc2lvbiBWLjEuMi4wMQoKKGZ1bmN0aW9uIChTY3JhdGNoKSB7CiAgInVzZSBzdHJpY3QiOwogIGlmICghU2NyYXRjaC5leHRlbnNpb25zLnVuc2FuZGJveGVkKSB0aHJvdyBuZXcgRXJyb3IoIlJlbmRlciBDb250cm9sIG11c3QgcnVuIHVuc2FuZGJveGVkISIpOwoKICBjb25zdCBtZW51SWNvblVSSSA9CiJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGRwWkhSb1BTSTROUzR6TURNaUlHaGxhV2RvZEQwaU9EVXVNekF6SWlCMmFXVjNRbTk0UFNJd0lEQWdPRFV1TXpBeklEZzFMak13TXlJK1BHY2djM1J5YjJ0bExXMXBkR1Z5YkdsdGFYUTlJakV3SWo0OGNHRjBhQ0JrUFNKTk1pQTBNaTQyTlRKRE1pQXlNQzR5TURFZ01qQXVNaUF5SURReUxqWTFNaUF5WXpJeUxqUTFNU0F3SURRd0xqWTFNaUF4T0M0eUlEUXdMalkxTWlBME1DNDJOVElnTUNBeU1pNDBOVEV0TVRndU1pQTBNQzQyTlRJdE5EQXVOalV5SURRd0xqWTFNa015TUM0eU1ERWdPRE11TXpBMElESWdOalV1TVRBMElESWdOREl1TmpVeWVpSWdabWxzYkQwaUl6VXpPRFppTlNJZ2MzUnliMnRsUFNJak1tWTBZelkzSWlCemRISnZhMlV0ZDJsa2RHZzlJalFpTHo0OGNHRjBhQ0JrUFNKdE5EUXVPRGM1SURZMkxqZzNNaTB6TGprMk5TQXhMalkySURFdU5qWXpMVE11T1RVeFl6RXVNVE0zTFRJdU5qazRJREl1TnpFeUxUVXVNRFU1SURRdU5qa3lMVGN1TURNeGJERTRMalF5TWkweE9DNHpOVFJqTGpjNUxTNDNPRFlnTWk0ME56SXRMak00TXlBekxqYzJNUzQ1TURJZ01TNHlPRGNnTVM0eU9ESWdNUzQyT1RRZ01pNDVOaTQ1TURVZ015NDNORFZNTlRFdU9UTTFJRFl5TGpFNU9HTXRNUzQ1T0NBeExqazNNeTAwTGpNMUlETXVOVFEwTFRjdU1EVTJJRFF1TmpjMUlpQm1hV3hzUFNJalptWm1JaUJtYVd4c0xYSjFiR1U5SW1WMlpXNXZaR1FpSUhOMGNtOXJaVDBpSTJabVppSWdjM1J5YjJ0bExXeHBibVZqWVhBOUluSnZkVzVrSWlCemRISnZhMlV0YkdsdVpXcHZhVzQ5SW5KdmRXNWtJaTgrUEhCaGRHZ2daRDBpVFRVeUxqUXpPU0EwTnk0eE1qSnpNaTQwTkNBeUxqQTNNU0EwTGpBMU55MHhMalEwTW1NekxqVXROeTQyTURJZ055NDJOUzAxTGpNNE15QTNMalkxTFRVdU16Z3pJaUJtYVd4c1BTSnViMjVsSWlCemRISnZhMlU5SWlObVptWWlJSE4wY205clpTMXNhVzVsWTJGd1BTSnliM1Z1WkNJZ2MzUnliMnRsTFd4cGJtVnFiMmx1UFNKeWIzVnVaQ0l2UGp4d1lYUm9JR1E5SWswMU15NDVNalFnTkRZdU5UWTFZUzQ0TkRNdU9EUXpJREFnTVNBeExTNDRORE10TGpnME1tTXVORFkzSURBZ0xqZzBNeTR6TnpjdU9EUXpMamcwTkhvaUlHWnBiR3c5SWlObVptWWlJR1pwYkd3dGNuVnNaVDBpWlhabGJtOWtaQ0lnYzNSeWIydGxQU0lqWm1abUlpQnpkSEp2YTJVdGJHbHVaV05oY0QwaWNtOTFibVFpSUhOMGNtOXJaUzFzYVc1bGFtOXBiajBpY205MWJtUWlMejQ4Y0dGMGFDQmtQU0pOTlRZdU1qZzJJRE15TGpjNU9XRTBMakV6SURRdU1UTWdNQ0F3SURFdE5DNHhNeTAwTGpFemRpMDBMalUzTW1FMExqRXpJRFF1TVRNZ01DQXdJREVnTkM0eE15MDBMakV6YURRdU5UY3pZVFF1TVRNZ05DNHhNeUF3SURBZ01TQTBMakV6SURRdU1UTjJOQzQxTnpKaE5DNHhNeUEwTGpFeklEQWdNQ0F4TFRRdU1UTWdOQzR4TTNwdExURTJMalE1T0NBd1lUUXVNVE1nTkM0eE15QXdJREFnTVMwMExqRXpMVFF1TVROMkxUUXVOVGN5WVRRdU1UTWdOQzR4TXlBd0lEQWdNU0EwTGpFekxUUXVNVE5vTkM0MU56TmhOQzR4TXlBMExqRXpJREFnTUNBeElEUXVNVE1nTkM0eE0zWTBMalUzTW1FMExqRXpJRFF1TVRNZ01DQXdJREV0TkM0eE15QTBMakV6ZW0wdE1UWXVORGszSURCaE5DNHhNeUEwTGpFeklEQWdNQ0F4TFRRdU1UTXROQzR4TTNZdE5DNDFOekpoTkM0eE15QTBMakV6SURBZ01DQXhJRFF1TVRNdE5DNHhNMmcwTGpVM01tRTBMakV6SURRdU1UTWdNQ0F3SURFZ05DNHhNeUEwTGpFemRqUXVOVGN5WVRRdU1UTWdOQzR4TXlBd0lEQWdNUzAwTGpFeklEUXVNVE42YlRBZ01UWXVORGs0WVRRdU1UTWdOQzR4TXlBd0lEQWdNUzAwTGpFekxUUXVNVE4yTFRRdU5UY3lZVFF1TVRNZ05DNHhNeUF3SURBZ01TQTBMakV6TFRRdU1UTm9OQzQxTnpKaE5DNHhNeUEwTGpFeklEQWdNQ0F4SURRdU1UTWdOQzR4TTNZMExqVTNNbUUwTGpFeklEUXVNVE1nTUNBd0lERXROQzR4TXlBMExqRXplbTB3SURFMkxqUTVOMkUwTGpFeklEUXVNVE1nTUNBd0lERXROQzR4TXkwMExqRXpkaTAwTGpVM01tRTBMakV6SURRdU1UTWdNQ0F3SURFZ05DNHhNeTAwTGpFemFEUXVOVGN5WVRRdU1UTWdOQzR4TXlBd0lEQWdNU0EwTGpFeklEUXVNVE4yTkM0MU56TmhOQzR4TXlBMExqRXpJREFnTUNBeExUUXVNVE1nTkM0eE0zcHRNVFl1TkRrM0xURTJMalE1TjJFMExqRXpJRFF1TVRNZ01DQXdJREV0TkM0eE15MDBMakV6ZGkwMExqVTNNbUUwTGpFeklEUXVNVE1nTUNBd0lERWdOQzR4TXkwMExqRXphRFF1TlRjellUUXVNVE1nTkM0eE15QXdJREFnTVNBMExqRXpJRFF1TVROMk5DNDFOekpoTkM0eE15QTBMakV6SURBZ01DQXhMVFF1TVRNZ05DNHhNM29pSUdacGJHdzlJaU5tWm1ZaUx6NDhMMmMrUEM5emRtYysiOwoKICBjb25zdCB2bSA9IFNjcmF0Y2gudm07CiAgY29uc3QgcnVudGltZSA9IHZtLnJ1bnRpbWU7CiAgY29uc3QgcmVuZGVyID0gdm0ucmVuZGVyZXI7CiAgY2xhc3MgU1ByZW5kZXJDb250cm9sIHsKICAgIGdldEluZm8oKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgaWQ6ICJTUHJlbmRlckNvbnRyb2wiLAogICAgICAgIG5hbWU6ICJSZW5kZXJlciBDb250cm9sIiwKICAgICAgICBjb2xvcjE6ICIjNTM4NmI1IiwKICAgICAgICBjb2xvcjI6ICIjM2Q2MTg0IiwKICAgICAgICBjb2xvcjM6ICIjMmY0YzY3IiwKICAgICAgICBtZW51SWNvblVSSSwKICAgICAgICBibG9ja3M6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAiZ2V0SUQiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgiZ2V0IElEIGxheWVyIG9mIFtUQVJHRVRdIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFRBUkdFVDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJUQVJHRVRTIiB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImdldE93bmVyIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoImdldCBvd25lciBvZiBsYXllciBJRCBbSURdIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIElEOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAwIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgICItLS0iLAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJleHBvcnRJRCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJleHBvcnQgSUQgW0lEXSBhcyBkYXRhLnVyaSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBJRDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMSB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNldFF1YWxpdHkiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJzZXQgcXVhbGl0eSBvZiBJRCBbSURdIHRvIFtOVU1dIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIElEOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAxIH0sCiAgICAgICAgICAgICAgTlVNOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAxIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgICItLS0iLAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJlZmZlY3RJRCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoInNldCBbRUZGRUNUXSBvZiBJRCBbSURdIHRvIFtOVU1dIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIEVGRkVDVDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJFRkZFQ1RTIiB9LAogICAgICAgICAgICAgIE5VTTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogNTAgfSwKICAgICAgICAgICAgICBJRDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMSB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInJlc2V0SUQiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJyZXNldCBlZmZlY3RzIG9mIElEIFtJRF0iKSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgSUQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgIi0tLSIsCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNjYWxlSUQiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJzZXQgc2NhbGUgb2YgSUQgW0lEXSB0byB4IFt4XSB5IFt5XSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBJRDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMCB9LAogICAgICAgICAgICAgIHg6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDEwMCB9LAogICAgICAgICAgICAgIHk6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDEwMCB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInNjYWxlT2ZJRCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJzY2FsZSBbWFldIG9mIElEIFtJRF0iKSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgWFk6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiWFkiIH0sCiAgICAgICAgICAgICAgSUQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgIi0tLSIsCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInBvc2l0aW9uSUQiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJzZXQgcG9zaXRpb24gb2YgSUQgW0lEXSB0byB4IFt4XSB5IFt5XSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBJRDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMCB9LAogICAgICAgICAgICAgIHg6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDAgfSwKICAgICAgICAgICAgICB5OiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAwIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAicG9zT2ZJRCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJbWFldIHBvc2l0aW9uIG9mIElEIFtJRF0iKSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgWFk6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiWFkiIH0sCiAgICAgICAgICAgICAgSUQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgIi0tLSIsCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImRpcmVjdElEIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgic2V0IGRpcmVjdGlvbiBvZiBJRCBbSURdIHRvIFtBTkdMRV0iKSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgSUQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDAgfSwKICAgICAgICAgICAgICBBTkdMRTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5BTkdMRSwgZGVmYXVsdFZhbHVlOiA5MCB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImRpck9mSUQiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgiZGlyZWN0aW9uIG9mIElEIFtJRF0iKSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgSUQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJyb3RhdGVJRCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoInNldCByb3RhdGlvbiBjZW50ZXIgb2YgSUQgW0lEXSB0byB4IFt4XSB5IFt5XSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBJRDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5OVU1CRVIsIGRlZmF1bHRWYWx1ZTogMCB9LAogICAgICAgICAgICAgIHg6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuTlVNQkVSLCBkZWZhdWx0VmFsdWU6IDAgfSwKICAgICAgICAgICAgICB5OiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAwIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAicm90YXRlT2ZJRCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJyb3RhdGlvbiBjZW50ZXIgW1hZXSBvZiBJRCBbSURdIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIFhZOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlhZIiB9LAogICAgICAgICAgICAgIElEOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLk5VTUJFUiwgZGVmYXVsdFZhbHVlOiAwIH0sCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgICBtZW51czogewogICAgICAgICAgWFk6IFsieCIsICJ5Il0sCiAgICAgICAgICBUQVJHRVRTOiB7IGFjY2VwdFJlcG9ydGVyczogdHJ1ZSwgaXRlbXM6ICJfZ2V0VGFyZ2V0cyIgfSwKICAgICAgICAgIEVGRkVDVFM6IHsgYWNjZXB0UmVwb3J0ZXJzOiB0cnVlLCBpdGVtczogIl9nZXRFZmZlY3RzIiB9CiAgICAgICAgfQogICAgICB9OwogICAgfQoKICAgIC8vIEhlbHBlciBGdW5jcwogICAgX2dldFRhcmdldHMoKSB7CiAgICAgIGNvbnN0IHNwcml0ZU5hbWVzID0gWwogICAgICAgIHsgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoIm15c2VsZiIpLCB2YWx1ZTogIl9teXNlbGZfIiB9LAogICAgICAgIHsgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoIlN0YWdlIiksIHZhbHVlOiAiX3N0YWdlXyIgfSwKICAgICAgICB7IHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJWaWRlbyBMYXllciIpLCB2YWx1ZTogIl92aWRlb18iIH0sCiAgICAgICAgeyB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgiUGVuIExheWVyIiksIHZhbHVlOiAiX3Blbl8iIH0KICAgICAgXTsKICAgICAgLy8gQ3VzdG9tIERyYXdhYmxlIExheWVyIChDU1QncyAzRCBvciBTaW1wbGUzRCBFeHRzIGZvciBFeGFtcGxlKQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlbmRlci5fYWxsRHJhd2FibGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgZHJhd2FibGUgPSByZW5kZXIuX2FsbERyYXdhYmxlc1tpXTsKICAgICAgICBpZiAoZHJhd2FibGUgIT09IHVuZGVmaW5lZCAmJiBkcmF3YWJsZS5jdXN0b21EcmF3YWJsZU5hbWUgIT09IHVuZGVmaW5lZCkgc3ByaXRlTmFtZXMucHVzaCh7CiAgICAgICAgICB0ZXh0OiBkcmF3YWJsZS5jdXN0b21EcmF3YWJsZU5hbWUsIHZhbHVlOiBgJHtpfT1TUC1jdXN0TGF5ZXJgCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgLy8gU3ByaXRlcwogICAgICBjb25zdCB0YXJnZXRzID0gcnVudGltZS50YXJnZXRzOwogICAgICBmb3IgKGxldCBpbmRleCA9IDE7IGluZGV4IDwgdGFyZ2V0cy5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICBjb25zdCB0YXJnZXQgPSB0YXJnZXRzW2luZGV4XTsKICAgICAgICBpZiAodGFyZ2V0LmlzT3JpZ2luYWwpIHNwcml0ZU5hbWVzLnB1c2goeyB0ZXh0OiB0YXJnZXQuZ2V0TmFtZSgpLCB2YWx1ZTogdGFyZ2V0LmdldE5hbWUoKSB9KTsKICAgICAgfQogICAgICByZXR1cm4gc3ByaXRlTmFtZXMubGVuZ3RoID4gMCA/IHNwcml0ZU5hbWVzIDogWyIiXTsKICAgIH0KCiAgICBfZ2V0RWZmZWN0cygpIHsKICAgICAgY29uc3QgZWZmZWN0cyA9IE9iamVjdC5rZXlzKHZtLmVkaXRpbmdUYXJnZXQuZWZmZWN0cyk7CiAgICAgIHJldHVybiBlZmZlY3RzLmxlbmd0aCA+IDAgPyBlZmZlY3RzIDogWyIiXTsKICAgIH0KCiAgICAvLyBCbG9jayBGdW5jcwogICAgZ2V0SUQoYXJncywgdXRpbCkgewogICAgICBpZiAoYXJncy5UQVJHRVQgPT09ICJfbXlzZWxmXyIpIHJldHVybiB1dGlsLnRhcmdldC5kcmF3YWJsZUlEOwogICAgICBpZiAoYXJncy5UQVJHRVQgPT09ICJfc3RhZ2VfIikgcmV0dXJuIHJ1bnRpbWUuZ2V0VGFyZ2V0Rm9yU3RhZ2UoKS5kcmF3YWJsZUlEOwogICAgICBpZiAoYXJncy5UQVJHRVQgPT09ICJfcGVuXyIpIHJldHVybiBydW50aW1lLmV4dF9wZW4/Ll9wZW5EcmF3YWJsZUlkIHx8ICIiOwogICAgICBjb25zdCB2aWRlb0wgPSBydW50aW1lLmlvRGV2aWNlcy52aWRlby5fZHJhd2FibGU7CiAgICAgIGlmIChhcmdzLlRBUkdFVCA9PT0gIl92aWRlb18iKSByZXR1cm4gdmlkZW9MICE9PSAtMSA/IHZpZGVvTCA6ICIiOwogICAgICBpZiAoYXJncy5UQVJHRVQuaW5jbHVkZXMoIj1TUC1jdXN0TGF5ZXIiKSkgewogICAgICAgIGNvbnN0IGxheWVySUQgPSBwYXJzZUludChhcmdzLlRBUkdFVCk7CiAgICAgICAgaWYgKHJlbmRlci5fYWxsRHJhd2FibGVzW2xheWVySURdPy5jdXN0b21EcmF3YWJsZU5hbWUgIT09IHVuZGVmaW5lZCkgcmV0dXJuIGxheWVySUQ7CiAgICAgIH0KICAgICAgY29uc3QgdGFyZ2V0ID0gcnVudGltZS5nZXRTcHJpdGVUYXJnZXRCeU5hbWUoYXJncy5UQVJHRVQpOwogICAgICByZXR1cm4gdGFyZ2V0ID8gdGFyZ2V0LmRyYXdhYmxlSUQgOiAiIjsKICAgIH0KCiAgICBnZXRPd25lcihhcmdzLCB1dGlsKSB7CiAgICAgIGNvbnN0IElEID0gU2NyYXRjaC5DYXN0LnRvTnVtYmVyKGFyZ3MuSUQpOyAvLyBFbXB0eSBOdW1iZXIgSW5wdXRzIGFyZSBhbHdheXMgMD8KICAgICAgaWYgKElEIDwgMCkgcmV0dXJuICIiOwogICAgICBjb25zdCBwZW5JRCA9IHJ1bnRpbWUuZXh0X3Blbj8uX3BlbkRyYXdhYmxlSWQgfHwgIiI7CiAgICAgIGNvbnN0IHZpZGVvTCA9IHJ1bnRpbWUuaW9EZXZpY2VzLnZpZGVvLl9kcmF3YWJsZTsKICAgICAgY29uc3QgdmlkSUQgPSB2aWRlb0wgIT09IC0xID8gdmlkZW9MIDogIiI7CiAgICAgIGlmIChJRCA9PT0gcGVuSUQpIHJldHVybiAiUGVuIExheWVyIjsKICAgICAgaWYgKElEID09PSB2aWRJRCkgcmV0dXJuICJWaWRlbyBMYXllciI7CiAgICAgIC8vIFNwcml0ZSBDaGVjawogICAgICBmb3IgKGNvbnN0IHRhcmdldCBvZiBydW50aW1lLnRhcmdldHMpIHsKICAgICAgICBpZiAodGFyZ2V0LmRyYXdhYmxlSUQgPT09IElEKSByZXR1cm4gYCR7dGFyZ2V0LmdldE5hbWUoKX0ke3RhcmdldC5pc09yaWdpbmFsID8gIiIgOiAiIChDbG9uZSkifWA7CiAgICAgIH0KICAgICAgLy8gQ3VzdG9tIExheWVyIENoZWNrCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVuZGVyLl9hbGxEcmF3YWJsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBkcmF3YWJsZSA9IHJlbmRlci5fYWxsRHJhd2FibGVzW2ldOwogICAgICAgIGlmICgKICAgICAgICAgIGRyYXdhYmxlLmN1c3RvbURyYXdhYmxlTmFtZSAhPT0gdW5kZWZpbmVkICYmIGkgPT09IElECiAgICAgICAgKSByZXR1cm4gZHJhd2FibGUuY3VzdG9tRHJhd2FibGVOYW1lOwogICAgICB9CiAgICAgIHJldHVybiAiIjsKICAgIH0KCiAgICBleHBvcnRJRChhcmdzKSB7CiAgICAgIGlmIChyZW5kZXIuX2RyYXdMaXN0LmluZGV4T2YoYXJncy5JRCkgPT09IC0xKSByZXR1cm4gIiI7CiAgICAgIGNvbnN0IGltYWdlRGF0YSA9IHJlbmRlci5leHRyYWN0RHJhd2FibGVTY3JlZW5TcGFjZShhcmdzLklEKS5pbWFnZURhdGE7CiAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTsKICAgICAgY2FudmFzLndpZHRoID0gaW1hZ2VEYXRhLndpZHRoOwogICAgICBjYW52YXMuaGVpZ2h0ID0gaW1hZ2VEYXRhLmhlaWdodDsKICAgICAgY2FudmFzLmdldENvbnRleHQoIjJkIikucHV0SW1hZ2VEYXRhKGltYWdlRGF0YSwgMCwgMCk7CiAgICAgIHJldHVybiBjYW52YXMudG9EYXRhVVJMKCJpbWFnZS9wbmciKTsKICAgIH0KCiAgICBzZXRRdWFsaXR5KGFyZ3MpIHsKICAgICAgY29uc3QgSUQgPSBTY3JhdGNoLkNhc3QudG9OdW1iZXIoYXJncy5JRCk7CiAgICAgIGlmIChyZW5kZXIuX2RyYXdMaXN0LmluZGV4T2YoSUQpID09PSAtMSkgcmV0dXJuOwogICAgICBjb25zdCB2YWx1ZSA9IFNjcmF0Y2guQ2FzdC50b051bWJlcihhcmdzLk5VTSk7CiAgICAgIGNvbnN0IGRyYXdhYmxlID0gcmVuZGVyLl9hbGxEcmF3YWJsZXNbSURdOwogICAgICBjb25zdCBwZW5JRCA9IHJ1bnRpbWUuZXh0X3Blbj8uX3BlbkRyYXdhYmxlSWQgfHwgIiI7CiAgICAgIGRyYXdhYmxlLnNldEhpZ2hRdWFsaXR5KHRydWUpOwogICAgICBpZiAocGVuSUQgPT09IElEKSBkcmF3YWJsZS5za2luLnNldFJlbmRlclF1YWxpdHkoTWF0aC5tYXgoMC4wNSwgTWF0aC5taW4oMzQsIHZhbHVlIC8gMykpKTsgLy8gMyBpcyB0aGUgbWF4IGJlZm9yZSB3ZWJnbCBlcnJvcnMKICAgICAgZWxzZSBkcmF3YWJsZS5za2luLl9tYXhUZXh0dXJlU2NhbGUgPSBNYXRoLm1heCgxLCBNYXRoLm1pbigxMDAsIE1hdGgucm91bmQodmFsdWUpKSk7CiAgICAgIGRyYXdhYmxlLnNraW4uZW1pdFdhc0FsdGVyZWQoKTsKICAgIH0KCiAgICBlZmZlY3RJRChhcmdzKSB7CiAgICAgIGNvbnN0IG51bSA9IFNjcmF0Y2guQ2FzdC50b051bWJlcihhcmdzLk5VTSk7CiAgICAgIGNvbnN0IGFsbExheSA9IHJlbmRlci5fZHJhd0xpc3Q7CiAgICAgIGlmICghdGhpcy5fZ2V0RWZmZWN0cygpLnNvbWUoZWZmZWN0ID0+IGVmZmVjdCA9PT0gYXJncy5FRkZFQ1QpKSByZXR1cm47CiAgICAgIGlmIChhbGxMYXkuaW5kZXhPZihhcmdzLklEKSAhPT0gLTEpIHJlbmRlci5fYWxsRHJhd2FibGVzW2FyZ3MuSURdLnVwZGF0ZUVmZmVjdChhcmdzLkVGRkVDVCwgbnVtKTsKICAgIH0KCiAgICBzY2FsZUlEKGFyZ3MpIHsKICAgICAgY29uc3QgYWxsTGF5ID0gcmVuZGVyLl9kcmF3TGlzdDsKICAgICAgaWYgKGFsbExheS5pbmRleE9mKGFyZ3MuSUQpICE9PSAtMSkgcmVuZGVyLl9hbGxEcmF3YWJsZXNbYXJncy5JRF0udXBkYXRlU2NhbGUoWwogICAgICAgIFNjcmF0Y2guQ2FzdC50b051bWJlcihhcmdzLngpLCBTY3JhdGNoLkNhc3QudG9OdW1iZXIoYXJncy55KQogICAgICBdKTsKICAgIH0KCiAgICBzY2FsZU9mSUQoYXJncykgewogICAgICBjb25zdCBhbGxMYXkgPSB2bS5yZW5kZXJlci5fZHJhd0xpc3Q7CiAgICAgIGlmIChhbGxMYXkuaW5kZXhPZihhcmdzLklEKSAhPT0gLTEpIHJldHVybiByZW5kZXIuX2FsbERyYXdhYmxlc1thcmdzLklEXS5fc2NhbGVbYXJncy5YWSA9PT0gIngiID8gMCA6IDFdOwogICAgICByZXR1cm4gMDsKICAgIH0KCiAgICBkaXJlY3RJRChhcmdzKSB7CiAgICAgIGNvbnN0IGRpciA9IFNjcmF0Y2guQ2FzdC50b051bWJlcihhcmdzLkFOR0xFKTsKICAgICAgY29uc3QgYWxsTGF5ID0gcmVuZGVyLl9kcmF3TGlzdDsKICAgICAgaWYgKGFsbExheS5pbmRleE9mKGFyZ3MuSUQpICE9PSAtMSkgcmVuZGVyLl9hbGxEcmF3YWJsZXNbYXJncy5JRF0udXBkYXRlRGlyZWN0aW9uKGRpcik7CiAgICB9CgogICAgZGlyT2ZJRChhcmdzKSB7CiAgICAgIGNvbnN0IGFsbExheSA9IHJlbmRlci5fZHJhd0xpc3Q7CiAgICAgIGlmIChhbGxMYXkuaW5kZXhPZihhcmdzLklEKSAhPT0gLTEpIHJldHVybiByZW5kZXIuX2FsbERyYXdhYmxlc1thcmdzLklEXS5fZGlyZWN0aW9uOwogICAgICByZXR1cm4gMDsKICAgIH0KCiAgICByb3RhdGVJRChhcmdzKSB7CiAgICAgIGNvbnN0IHggPSBTY3JhdGNoLkNhc3QudG9OdW1iZXIoYXJncy54KTsKICAgICAgY29uc3QgeSA9IFNjcmF0Y2guQ2FzdC50b051bWJlcihhcmdzLnkpOwogICAgICBjb25zdCBhbGxMYXkgPSByZW5kZXIuX2RyYXdMaXN0OwogICAgICBpZiAoYWxsTGF5LmluZGV4T2YoYXJncy5JRCkgIT09IC0xKSB7CiAgICAgICAgcmVuZGVyLl9hbGxEcmF3YWJsZXNbYXJncy5JRF0uc2tpbi5fcm90YXRpb25DZW50ZXIgPSBuZXcgRmxvYXQzMkFycmF5KFt4LCB5LCAwXSk7CiAgICAgICAgcmVuZGVyLl9hbGxEcmF3YWJsZXNbYXJncy5JRF0uX3NraW5XYXNBbHRlcmVkKCk7CiAgICAgIH0KICAgIH0KCiAgICByb3RhdGVPZklEKGFyZ3MpIHsKICAgICAgY29uc3QgYWxsTGF5ID0gcmVuZGVyLl9kcmF3TGlzdDsKICAgICAgaWYgKGFsbExheS5pbmRleE9mKGFyZ3MuSUQpICE9PSAtMSkgcmV0dXJuIHJlbmRlci5fYWxsRHJhd2FibGVzW2FyZ3MuSURdLl9za2luU2NhbGVbYXJncy5YWSA9PT0gIngiID8gMCA6IDFdIC8gMjsKICAgICAgcmV0dXJuIDA7CiAgICB9CgogICAgcG9zaXRpb25JRChhcmdzKSB7CiAgICAgIGFyZ3MueCA9IFNjcmF0Y2guQ2FzdC50b051bWJlcihhcmdzLngpOwogICAgICBhcmdzLnkgPSBTY3JhdGNoLkNhc3QudG9OdW1iZXIoYXJncy55KTsKICAgICAgY29uc3QgYWxsTGF5ID0gcmVuZGVyLl9kcmF3TGlzdDsKICAgICAgaWYgKGFsbExheS5pbmRleE9mKGFyZ3MuSUQpICE9PSAtMSkgcmVuZGVyLl9hbGxEcmF3YWJsZXNbYXJncy5JRF0udXBkYXRlUG9zaXRpb24oW2FyZ3MueCwgYXJncy55XSk7CiAgICB9CgogICAgcG9zT2ZJRChhcmdzKSB7CiAgICAgIGNvbnN0IGFsbExheSA9IHJlbmRlci5fZHJhd0xpc3Q7CiAgICAgIGlmIChhbGxMYXkuaW5kZXhPZihhcmdzLklEKSAhPT0gLTEpIHJldHVybiByZW5kZXIuX2FsbERyYXdhYmxlc1thcmdzLklEXS5fcG9zaXRpb25bYXJncy5YWSA9PT0gIngiID8gMCA6IDFdOwogICAgICByZXR1cm4gMDsKICAgIH0KCiAgICByZXNldElEKGFyZ3MpIHsKICAgICAgY29uc3QgZWZmZWN0cyA9IHRoaXMuX2dldEVmZmVjdHMoKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlZmZlY3RzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5lZmZlY3RJRCh7IElEIDogYXJncy5JRCwgRUZGRUNUIDogZWZmZWN0c1tpXSwgTlVNIDogMCB9KTsKICAgICAgfQogICAgfQogIH0KCiAgU2NyYXRjaC5leHRlbnNpb25zLnJlZ2lzdGVyKG5ldyBTUHJlbmRlckNvbnRyb2woKSk7Cn0pKFNjcmF0Y2gpOwo=","https://extensions.turbowarp.org/Skyhigh173/json.js","https://extensions.turbowarp.org/numerical-encoding-2.js","https://extensions.turbowarp.org/Lily/Skins.js","https://extensions.turbowarp.org/Lily/LooksPlus.js","https://extensions.turbowarp.org/lab/text.js","https://extensions.turbowarp.org/TheShovel/ShovelUtils.js","data:text/javascript;base64,Ly8gTmFtZTogTWVzc2FnZXMrCi8vIElEOiBTUG1lc3NhZ2VQbHVzCi8vIERlc2NyaXB0aW9uOiBOZXcgUG93ZXJmdWwgTWVzc2FnZSBCbG9ja3MgdGhhdCB3b3JrIHdpdGggVmFuaWxsYSBCbG9ja3MhCi8vIEJ5OiBTaGFya1Bvb2wKCi8vIFZlcnNpb24gMS4zLjEKCihmdW5jdGlvbiAoU2NyYXRjaCkgewogICJ1c2Ugc3RyaWN0IjsKICBpZiAoIVNjcmF0Y2guZXh0ZW5zaW9ucy51bnNhbmRib3hlZCkgdGhyb3cgbmV3IEVycm9yKCJNZXNzYWdlcysgbXVzdCBydW4gdW5zYW5kYm94ZWQiKTsKCiAgY29uc3Qgdm0gPSBTY3JhdGNoLnZtOwogIGNvbnN0IHJ1bnRpbWUgPSB2bS5ydW50aW1lOwoKICBjb25zdCBrTWVzc2FnZU5hbWUgPSBTeW1ib2woImtNZXNzYWdlTmFtZSIpOyAvLyBNYXkgYmUgZGVmaW5lZCBvbiBhIFRocmVhZCBhcyBhIHN0cmluZwogIGNvbnN0IGtNZXNzYWdlRmxhZyA9IFN5bWJvbCgia01lc3NhZ2VGbGFnIik7IC8vIE1heSBiZSBkZWZpbmVkIG9uIGEgVGhyZWFkIGFzIGEgbnVtYmVyCiAgY29uc3Qga1JlY2VpdmVkRGF0YSA9IFN5bWJvbCgia1JlY2VpdmVkRGF0YSIpOyAvLyBNYXkgYmUgZGVmaW5lZCBvbiBhIFRocmVhZCBhcyBhbnkgU2NyYXRjaC1jb21wYXRpYmxlIHZhbHVlCgogIC8vIFRPRE86IF9hbGxfIGlzIG5vdCBhY3R1YWxseSBhIHJlc2VydmVkIHZhbHVlCiAgY29uc3QgQUxMID0gIl9hbGxfIiwgU1RBR0UgPSAiX3N0YWdlXyIsIE1ZU0VMRiA9ICJfbXlzZWxmXyIsIE1ZU0VMRjIgPSAiX215c2VsZk9ubHlfIjsKCiAgbGV0IG5vblJlc3RhcnRlZE1zZ3MgPSBbXSwgdGhyZWFkZWRNc2dzID0gW107CgogIGNvbnN0IG9nU3RhcnRIYXRzID0gcnVudGltZS5zdGFydEhhdHM7CiAgcnVudGltZS5zdGFydEhhdHMgPSBmdW5jdGlvbiAob3Bjb2RlLCBmaWVsZHMsIHRhcmdldCkgewogICAgbGV0IHRocmVhZHMgPSBvZ1N0YXJ0SGF0cy5jYWxsKHRoaXMsIG9wY29kZSwgZmllbGRzLCB0YXJnZXQpOwogICAgaWYgKG9wY29kZSA9PT0gImV2ZW50X3doZW5icm9hZGNhc3RyZWNlaXZlZCIpIHsKICAgICAgdGhyZWFkcyA9IFsuLi50aHJlYWRzLCAuLi5ydW50aW1lLnN0YXJ0SGF0cygiU1BtZXNzYWdlUGx1c193aGVuQW55QnJvYWRjYXN0IildOwogICAgICBydW50aW1lLmFsbFNjcmlwdHNCeU9wY29kZURvKAogICAgICAgICJTUG1lc3NhZ2VQbHVzX3doZW5SZWNlaXZlZCIsIChzY3JpcHQsIHRhcmdldCkgPT4gewogICAgICAgICAgLy8gZmllbGRzIGFyZSBldmFsdWF0ZWQgaW4gdGhlIGhhdCwgd2hpY2ggbWFrZXMgaXQgc2xvd2VyIDooCiAgICAgICAgICBjb25zdCBpZCA9IHNjcmlwdC5ibG9ja0lkOwogICAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBydW50aW1lLnRocmVhZE1hcC5nZXQoYCR7dGFyZ2V0LmlkfSYke2lkfWApOwogICAgICAgICAgaWYgKGV4aXN0aW5nKSB0aHJlYWRzLnB1c2gocnVudGltZS5fcmVzdGFydFRocmVhZChleGlzdGluZykpOwogICAgICAgICAgZWxzZSB0aHJlYWRzLnB1c2gocnVudGltZS5fcHVzaFRocmVhZChpZCwgdGFyZ2V0KSk7CiAgICAgICAgfQogICAgICApOwogICAgICBjb25zdCBuYW1lID0gZmllbGRzLkJST0FEQ0FTVF9PUFRJT047CiAgICAgIGZvciAoY29uc3QgdGhyZWFkIG9mIHRocmVhZHMpIHRocmVhZFtrTWVzc2FnZU5hbWVdID0gbmFtZTsKICAgIH0KICAgIHJldHVybiB0aHJlYWRzOwogIH07CgogIGNvbnN0IG9nUmVzdGFydFRocmVhZCA9IHJ1bnRpbWUuX3Jlc3RhcnRUaHJlYWQ7CiAgcnVudGltZS5fcmVzdGFydFRocmVhZCA9IGZ1bmN0aW9uICh0aHJlYWQpIHsKICAgIGNvbnN0IG5hbWUgPSB0aHJlYWRba01lc3NhZ2VOYW1lXTsKICAgIGlmIChuYW1lKSB7CiAgICAgIGlmICh0aHJlYWRlZE1zZ3MuaW5kZXhPZihuYW1lKSA+IC0xKSByZXR1cm4gcnVudGltZS5fcHVzaFRocmVhZCh0aHJlYWQudG9wQmxvY2ssIHRocmVhZC50YXJnZXQpOwogICAgICBlbHNlIGlmIChub25SZXN0YXJ0ZWRNc2dzLmluZGV4T2YobmFtZSkgPiAtMSkgcmV0dXJuIHRocmVhZDsKICAgIH0KICAgIHJldHVybiBvZ1Jlc3RhcnRUaHJlYWQuY2FsbCh0aGlzLCB0aHJlYWQpOwogIH07CgogIGNvbnN0IG1lbnVJY29uVVJJID0KImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIZHBaSFJvUFNJMk15NDJPQ0lnYUdWcFoyaDBQU0kyTXk0Mk9DSWdkbWxsZDBKdmVEMGlNQ0F3SURZekxqWTRJRFl6TGpZNElqNDhjR0YwYUNCa1BTSk5NaUF6TVM0NE5FTXlJREUxTGpNMklERTFMak0ySURJZ016RXVPRFFnTW5NeU9TNDROQ0F4TXk0ek5pQXlPUzQ0TkNBeU9TNDROQzB4TXk0ek5pQXlPUzQ0TkMweU9TNDROQ0F5T1M0NE5GTXlJRFE0TGpNeUlESWdNekV1T0RSNklpQm1hV3hzUFNJalptWmlaakF3SWlCemRISnZhMlU5SWlOak9UQWlJSE4wY205clpTMTNhV1IwYUQwaU5DSXZQanh3WVhSb0lHUTlJazB4TUM0NE1USWdNekF1TkRZMVl5MHVNVGcxTFRrdU1EZzNJRFV1TURNekxURXhMams1TnlBNExqazJOQzB4TVM0NU9UY2dOQzQzT0RNZ01DQXhOUzR6TnkwdU1qYzJJREl6TGpVeU1pQXdJRE11T1RndU1UTTFJRGt1TnpZeUlETXVNVFV6SURrdU5UY2dNVEV1T1RrM0xTNHhPREVnT0M0ek55MDJMalkwSURFd0xqa3hPQzA1TGpZek9DQXhNQzQ1TVRoSU16QXVOell5WXkweExqTTNJREF0TlM0eU1ETWdOeTR5TWpZdE1URXVORFU0SURjdU1ERXROQzQwTXpZdExqRTFNeUF5TGpVeU1pMDNMakF4TGpjME1TMDNMakF4TFRVdU1qYzVJREF0T1M0eE1EVXROQzQxT1RRdE9TNHlNek10TVRBdU9URTRJaUJtYVd4c1BTSWpabVptSWk4K1BIQmhkR2dnWkQwaVRUTTRMall5TlNBME5DNDRNalIyTFRNdU1UYzJhQzB6TGpFM05tTXRNUzQxTXlBd0xUSXVOemN0TVM0eE16UXRNaTQzTnkweUxqVXpOSE14TGpJMExUSXVOVE0wSURJdU56Y3RNaTQxTXpSb015NHhOeloyTFRNdU1UYzJZekF0TVM0MU15QXhMakV6TkMweUxqYzNJREl1TlRNMExUSXVOemR6TWk0MU16TWdNUzR5TkNBeUxqVXpNeUF5TGpjM2RqTXVNVGMyYURNdU1UYzJZekV1TlRNZ01DQXlMamMzTVNBeExqRXpOU0F5TGpjM01TQXlMalV6TkNBd0lERXVOQzB4TGpJMElESXVOVE0wTFRJdU56Y2dNaTQxTXpSb0xUTXVNVGMzZGpNdU1UYzJZekFnTVM0MU15MHhMakV6TkNBeUxqYzNMVEl1TlRNeklESXVOemR6TFRJdU5UTTBMVEV1TWpRdE1pNDFNelF0TWk0M04zb2lJR1pwYkd3OUltNXZibVVpSUhOMGNtOXJaVDBpSTJabVltWXdNQ0lnYzNSeWIydGxMWGRwWkhSb1BTSTJJaTgrUEhCaGRHZ2daRDBpVFRNNExqWXlOU0EwTkM0NE1qUjJMVE11TVRjMmFDMHpMakUzTm1NdE1TNDFNeUF3TFRJdU56Y3RNUzR4TXpRdE1pNDNOeTB5TGpVek5ITXhMakkwTFRJdU5UTTBJREl1TnpjdE1pNDFNelJvTXk0eE56WjJMVE11TVRjMll6QXRNUzQxTXlBeExqRXpOQzB5TGpjM0lESXVOVE0wTFRJdU56ZHpNaTQxTXpNZ01TNHlOQ0F5TGpVek15QXlMamMzZGpNdU1UYzJhRE11TVRjMll6RXVOVE1nTUNBeUxqYzNNU0F4TGpFek5TQXlMamMzTVNBeUxqVXpOQ0F3SURFdU5DMHhMakkwSURJdU5UTTBMVEl1TnpjZ01pNDFNelJvTFRNdU1UYzNkak11TVRjMll6QWdNUzQxTXkweExqRXpOQ0F5TGpjM0xUSXVOVE16SURJdU56ZHpMVEl1TlRNMExURXVNalF0TWk0MU16UXRNaTQzTnlJZ1ptbHNiRDBpSTJabVppSXZQand2YzNablBnPT0iOwoKICBjbGFzcyBTUG1lc3NhZ2VQbHVzIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBydW50aW1lLm9uKCJBRlRFUl9FWEVDVVRFIiwgKCkgPT4gewogICAgICAgIGZvciAoY29uc3QgdGhyZWFkIG9mIHJ1bnRpbWUudGhyZWFkcykgewogICAgICAgICAgaWYgKHRocmVhZFtrTWVzc2FnZUZsYWddKSB0aHJlYWRba01lc3NhZ2VGbGFnXS0tOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgZ2V0SW5mbygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBpZDogIlNQbWVzc2FnZVBsdXMiLAogICAgICAgIG5hbWU6IFNjcmF0Y2gudHJhbnNsYXRlKCJNZXNzYWdlcysiKSwKICAgICAgICBjb2xvcjE6ICIjRkZCRjAwIiwKICAgICAgICBjb2xvcjI6ICIjRTZBQzAwIiwKICAgICAgICBjb2xvcjM6ICIjQ0M5OTAwIiwKICAgICAgICBtZW51SWNvblVSSSwKICAgICAgICBibG9ja3M6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAid2hlbkFueUJyb2FkY2FzdCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuRVZFTlQsCiAgICAgICAgICAgIGV4dGVuc2lvbnM6IFsiY29sb3Vyc19ldmVudCJdLAogICAgICAgICAgICBpc0VkZ2VBY3RpdmF0ZWQ6IGZhbHNlLAogICAgICAgICAgICBzaG91bGRSZXN0YXJ0RXhpc3RpbmdUaHJlYWRzOiB0cnVlLAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgid2hlbiBhbnkgYnJvYWRjYXN0IGlzIHJlY2VpdmVkIikKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogIm1lc3NhZ2VOYW1lIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgZXh0ZW5zaW9uczogWyJjb2xvdXJzX2V2ZW50Il0sCiAgICAgICAgICAgIGFsbG93RHJvcEFueXdoZXJlOiB0cnVlLCBkaXNhYmxlTW9uaXRvcjogdHJ1ZSwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoImJyb2FkY2FzdCBuYW1lIikKICAgICAgICAgIH0sCiAgICAgICAgICAiLS0tIiwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAiYnJvYWRjYXN0VGFyZ2V0IiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICBleHRlbnNpb25zOiBbImNvbG91cnNfZXZlbnQiXSwKICAgICAgICAgICAgaGlkZUZyb21QYWxldHRlOiB0cnVlLAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgiYnJvYWRjYXN0IFtCUk9BRENBU1RfT1BUSU9OXSB0byBbVEFSR0VUXSBhbmQgW1dBSVRdIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIEJST0FEQ0FTVF9PUFRJT046IHsgdHlwZTogbnVsbCB9LAogICAgICAgICAgICAgIFRBUkdFVDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJUQVJHRVRTIiB9LAogICAgICAgICAgICAgIFdBSVQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiU0hPVUxEX1dBSVQiIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImJyb2FkY2FzdERhdGFUYXJnZXQiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIGV4dGVuc2lvbnM6IFsiY29sb3Vyc19ldmVudCJdLAogICAgICAgICAgICBoaWRlRnJvbVBhbGV0dGU6IHRydWUsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJicm9hZGNhc3QgW0JST0FEQ0FTVF9PUFRJT05dIHdpdGggZGF0YSBbREFUQV0gdG8gW1RBUkdFVF0gYW5kIFtXQUlUXSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBCUk9BRENBU1RfT1BUSU9OOiB7IHR5cGU6IG51bGwgfSwKICAgICAgICAgICAgICBUQVJHRVQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiVEFSR0VUUyIgfSwKICAgICAgICAgICAgICBEQVRBOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORyB9LAogICAgICAgICAgICAgIFdBSVQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiU0hPVUxEX1dBSVQiIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuWE1MLAogICAgICAgICAgICB4bWw6IGAKICAgICAgICAgICAgICA8YmxvY2sgdHlwZT0iU1BtZXNzYWdlUGx1c19icm9hZGNhc3RUYXJnZXQiPjx2YWx1ZSBuYW1lPSJCUk9BRENBU1RfT1BUSU9OIj48c2hhZG93IHR5cGU9ImV2ZW50X2Jyb2FkY2FzdF9tZW51Ij48L3NoYWRvdz48L3ZhbHVlPjx2YWx1ZSBuYW1lPSJUQVJHRVQiPjxzaGFkb3cgdHlwZT0iU1BtZXNzYWdlUGx1c19tZW51X1RBUkdFVFMiPjwvc2hhZG93PjwvdmFsdWU+PHZhbHVlIG5hbWU9IkRBVEEiPjxzaGFkb3cgdHlwZT0idGV4dCI+PC9zaGFkb3c+PC92YWx1ZT48dmFsdWUgbmFtZT0iU0hPVUxEX1dBSVQiPjxzaGFkb3cgdHlwZT0iU1BtZXNzYWdlUGx1c19tZW51X1NIT1VMRF9XQUlUIj48L3NoYWRvdz48L3ZhbHVlPjwvYmxvY2s+CiAgICAgICAgICAgICAgPGJsb2NrIHR5cGU9IlNQbWVzc2FnZVBsdXNfYnJvYWRjYXN0RGF0YVRhcmdldCI+PHZhbHVlIG5hbWU9IkJST0FEQ0FTVF9PUFRJT04iPjxzaGFkb3cgdHlwZT0iZXZlbnRfYnJvYWRjYXN0X21lbnUiPjwvc2hhZG93PjwvdmFsdWU+PHZhbHVlIG5hbWU9IlRBUkdFVCI+PHNoYWRvdyB0eXBlPSJTUG1lc3NhZ2VQbHVzX21lbnVfVEFSR0VUUyI+PC9zaGFkb3c+PC92YWx1ZT48dmFsdWUgbmFtZT0iREFUQSI+PHNoYWRvdyB0eXBlPSJ0ZXh0Ij48L3NoYWRvdz48L3ZhbHVlPjx2YWx1ZSBuYW1lPSJTSE9VTERfV0FJVCI+PHNoYWRvdyB0eXBlPSJTUG1lc3NhZ2VQbHVzX21lbnVfU0hPVUxEX1dBSVQiPjwvc2hhZG93PjwvdmFsdWU+PC9ibG9jaz4KICAgICAgICAgICAgYCwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImJyb2FkY2FzdEFycmF5IiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICBleHRlbnNpb25zOiBbImNvbG91cnNfZXZlbnQiXSwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoImJyb2FkY2FzdCBbTUVTU0FHRVNdIHdpdGggZGF0YSBbREFUQV0gdG8gW1RBUkdFVF0gYW5kIFtXQUlUXSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBNRVNTQUdFUzogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogYFsibWVzc2FnZTEiLCAibWVzc2FnZTIiXWAgfSwKICAgICAgICAgICAgICBUQVJHRVQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiVEFSR0VUUyIgfSwKICAgICAgICAgICAgICBEQVRBOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORyB9LAogICAgICAgICAgICAgIFdBSVQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiU0hPVUxEX1dBSVQiIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInJlY2VpdmVkRGF0YSIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIGV4dGVuc2lvbnM6IFsiY29sb3Vyc19ldmVudCJdLAogICAgICAgICAgICBhbGxvd0Ryb3BBbnl3aGVyZTogdHJ1ZSwgZGlzYWJsZU1vbml0b3I6IHRydWUsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJyZWNlaXZlZCBkYXRhIikKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogIm90aGVyRGF0YSIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIGV4dGVuc2lvbnM6IFsiY29sb3Vyc19ldmVudCJdLAogICAgICAgICAgICBhbGxvd0Ryb3BBbnl3aGVyZTogdHJ1ZSwgZGlzYWJsZU1vbml0b3I6IHRydWUsIGhpZGVGcm9tUGFsZXR0ZTogdHJ1ZSwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoInJlY2VpdmVkIGRhdGEgZnJvbSBbQlJPQURDQVNUX09QVElPTl0gaW4gW1RBUkdFVF0iKSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgQlJPQURDQVNUX09QVElPTjogeyB0eXBlOiBudWxsIH0sCiAgICAgICAgICAgICAgVEFSR0VUOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlRBUkdFVFMiIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImJyb2FkY2FzdFJldHVybiIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIGV4dGVuc2lvbnM6IFsiY29sb3Vyc19ldmVudCJdLAogICAgICAgICAgICBoaWRlRnJvbVBhbGV0dGU6IHRydWUsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJicm9hZGNhc3QgW0JST0FEQ0FTVF9PUFRJT05dIHRvIFtUQVJHRVRdIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIEJST0FEQ0FTVF9PUFRJT046IHsgdHlwZTogbnVsbCB9LAogICAgICAgICAgICAgIFRBUkdFVDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJUQVJHRVRTIiB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJicm9hZGNhc3RSZXR1cm5EYXRhIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgZXh0ZW5zaW9uczogWyJjb2xvdXJzX2V2ZW50Il0sCiAgICAgICAgICAgIGhpZGVGcm9tUGFsZXR0ZTogdHJ1ZSwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoImJyb2FkY2FzdCBbQlJPQURDQVNUX09QVElPTl0gd2l0aCBkYXRhIFtEQVRBXSB0byBbVEFSR0VUXSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBCUk9BRENBU1RfT1BUSU9OOiB7IHR5cGU6IG51bGwgfSwKICAgICAgICAgICAgICBUQVJHRVQ6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiVEFSR0VUUyIgfSwKICAgICAgICAgICAgICBEQVRBOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORyB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlhNTCwKICAgICAgICAgICAgeG1sOiBgCiAgICAgICAgICAgICAgPGJsb2NrIHR5cGU9IlNQbWVzc2FnZVBsdXNfb3RoZXJEYXRhIj48dmFsdWUgbmFtZT0iQlJPQURDQVNUX09QVElPTiI+PHNoYWRvdyB0eXBlPSJldmVudF9icm9hZGNhc3RfbWVudSI+PC9zaGFkb3c+PC92YWx1ZT48dmFsdWUgbmFtZT0iVEFSR0VUIj48c2hhZG93IHR5cGU9IlNQbWVzc2FnZVBsdXNfbWVudV9UQVJHRVRTIj48L3NoYWRvdz48L3ZhbHVlPjwvYmxvY2s+CiAgICAgICAgICAgICAgPHNlcCBnYXA9IjM2Ii8+CiAgICAgICAgICAgICAgPGJsb2NrIHR5cGU9IlNQbWVzc2FnZVBsdXNfYnJvYWRjYXN0UmV0dXJuIj48dmFsdWUgbmFtZT0iQlJPQURDQVNUX09QVElPTiI+PHNoYWRvdyB0eXBlPSJldmVudF9icm9hZGNhc3RfbWVudSI+PC9zaGFkb3c+PC92YWx1ZT48dmFsdWUgbmFtZT0iVEFSR0VUIj48c2hhZG93IHR5cGU9IlNQbWVzc2FnZVBsdXNfbWVudV9UQVJHRVRTIj48L3NoYWRvdz48L3ZhbHVlPjx2YWx1ZSBuYW1lPSJEQVRBIj48c2hhZG93IHR5cGU9InRleHQiPjwvc2hhZG93PjwvdmFsdWU+PC9ibG9jaz4KICAgICAgICAgICAgICA8YmxvY2sgdHlwZT0iU1BtZXNzYWdlUGx1c19icm9hZGNhc3RSZXR1cm5EYXRhIj48dmFsdWUgbmFtZT0iQlJPQURDQVNUX09QVElPTiI+PHNoYWRvdyB0eXBlPSJldmVudF9icm9hZGNhc3RfbWVudSI+PC9zaGFkb3c+PC92YWx1ZT48dmFsdWUgbmFtZT0iVEFSR0VUIj48c2hhZG93IHR5cGU9IlNQbWVzc2FnZVBsdXNfbWVudV9UQVJHRVRTIj48L3NoYWRvdz48L3ZhbHVlPjx2YWx1ZSBuYW1lPSJEQVRBIj48c2hhZG93IHR5cGU9InRleHQiPjwvc2hhZG93PjwvdmFsdWU+PC9ibG9jaz4KICAgICAgICAgICAgYCwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogInJlc3BvbmREYXRhIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICBleHRlbnNpb25zOiBbImNvbG91cnNfZXZlbnQiXSwKICAgICAgICAgICAgaXNUZXJtaW5hbDogdHJ1ZSwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoInJlc3BvbmQgW0RBVEFdIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIERBVEE6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6IFNjcmF0Y2gudHJhbnNsYXRlKCJyZWNlaXZlZCEiKSB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgIi0tLSIsCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImlzUmVjZWl2ZWQiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkJPT0xFQU4sCiAgICAgICAgICAgIGV4dGVuc2lvbnM6IFsiY29sb3Vyc19ldmVudCJdLAogICAgICAgICAgICBkaXNhYmxlTW9uaXRvcjogdHJ1ZSwgaGlkZUZyb21QYWxldHRlOiB0cnVlLAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgiaXMgW0JST0FEQ0FTVF9PUFRJT05dIHJlY2VpdmVkPyIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBCUk9BRENBU1RfT1BUSU9OOiB7IHR5cGU6IG51bGwgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAiaXNXYWl0aW5nIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5CT09MRUFOLAogICAgICAgICAgICBleHRlbnNpb25zOiBbImNvbG91cnNfZXZlbnQiXSwKICAgICAgICAgICAgZGlzYWJsZU1vbml0b3I6IHRydWUsIGhpZGVGcm9tUGFsZXR0ZTogdHJ1ZSwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoImlzIFtCUk9BRENBU1RfT1BUSU9OXSB3YWl0aW5nPyIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBCUk9BRENBU1RfT1BUSU9OOiB7IHR5cGU6IG51bGwgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAicmVjZWl2ZXJzIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5SRVBPUlRFUiwKICAgICAgICAgICAgZXh0ZW5zaW9uczogWyJjb2xvdXJzX2V2ZW50Il0sCiAgICAgICAgICAgIGRpc2FibGVNb25pdG9yOiB0cnVlLCBoaWRlRnJvbVBhbGV0dGU6IHRydWUsCiAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJyZWNlaXZlcnMgb2YgW0JST0FEQ0FTVF9PUFRJT05dIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIEJST0FEQ0FTVF9PUFRJT046IHsgdHlwZTogbnVsbCB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJ0b2dnbGVSZXN0YXJ0IiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICBleHRlbnNpb25zOiBbImNvbG91cnNfZXZlbnQiXSwKICAgICAgICAgICAgaGlkZUZyb21QYWxldHRlOiB0cnVlLAogICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgic2V0IHNjcmlwdCByZXN0YXJ0IGZvciBbQlJPQURDQVNUX09QVElPTl0gdG8gW1RPR0dMRV0iKSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgQlJPQURDQVNUX09QVElPTjogeyB0eXBlOiBudWxsIH0sCiAgICAgICAgICAgICAgVE9HR0xFOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIlRPR0dMRSIgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAidG9nZ2xlT3ZlcmxhcCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgZXh0ZW5zaW9uczogWyJjb2xvdXJzX2V2ZW50Il0sCiAgICAgICAgICAgIGhpZGVGcm9tUGFsZXR0ZTogdHJ1ZSwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoInNldCBzY3JpcHQgb3ZlcmxhcCBmb3IgW0JST0FEQ0FTVF9PUFRJT05dIHRvIFtUT0dHTEVdIiksCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIEJST0FEQ0FTVF9PUFRJT046IHsgdHlwZTogbnVsbCB9LAogICAgICAgICAgICAgIFRPR0dMRTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJUT0dHTEUiIH0KICAgICAgICAgICAgfSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuWE1MLAogICAgICAgICAgICB4bWw6IGAKICAgICAgICAgICAgICA8YmxvY2sgdHlwZT0iU1BtZXNzYWdlUGx1c19pc1JlY2VpdmVkIj48dmFsdWUgbmFtZT0iQlJPQURDQVNUX09QVElPTiI+PHNoYWRvdyB0eXBlPSJldmVudF9icm9hZGNhc3RfbWVudSI+PC9zaGFkb3c+PC92YWx1ZT48L2Jsb2NrPgogICAgICAgICAgICAgIDxibG9jayB0eXBlPSJTUG1lc3NhZ2VQbHVzX2lzV2FpdGluZyI+PHZhbHVlIG5hbWU9IkJST0FEQ0FTVF9PUFRJT04iPjxzaGFkb3cgdHlwZT0iZXZlbnRfYnJvYWRjYXN0X21lbnUiPjwvc2hhZG93PjwvdmFsdWU+PC9ibG9jaz4KICAgICAgICAgICAgICA8YmxvY2sgdHlwZT0iU1BtZXNzYWdlUGx1c19yZWNlaXZlcnMiPjx2YWx1ZSBuYW1lPSJCUk9BRENBU1RfT1BUSU9OIj48c2hhZG93IHR5cGU9ImV2ZW50X2Jyb2FkY2FzdF9tZW51Ij48L3NoYWRvdz48L3ZhbHVlPjwvYmxvY2s+CiAgICAgICAgICAgICAgPHNlcCBnYXA9IjM2Ii8+CiAgICAgICAgICAgICAgPGJsb2NrIHR5cGU9IlNQbWVzc2FnZVBsdXNfdG9nZ2xlUmVzdGFydCI+PHZhbHVlIG5hbWU9IkJST0FEQ0FTVF9PUFRJT04iPjxzaGFkb3cgdHlwZT0iZXZlbnRfYnJvYWRjYXN0X21lbnUiPjwvc2hhZG93PjwvdmFsdWU+PHZhbHVlIG5hbWU9IlRPR0dMRSI+PHNoYWRvdyB0eXBlPSJTUG1lc3NhZ2VQbHVzX1RPR0dMRV9tZW51Ij48L3NoYWRvdz48L3ZhbHVlPjwvYmxvY2s+CiAgICAgICAgICAgICAgPGJsb2NrIHR5cGU9IlNQbWVzc2FnZVBsdXNfdG9nZ2xlT3ZlcmxhcCI+PHZhbHVlIG5hbWU9IkJST0FEQ0FTVF9PUFRJT04iPjxzaGFkb3cgdHlwZT0iZXZlbnRfYnJvYWRjYXN0X21lbnUiPjwvc2hhZG93PjwvdmFsdWU+PHZhbHVlIG5hbWU9IlRPR0dMRSI+PHNoYWRvdyB0eXBlPSJTUG1lc3NhZ2VQbHVzX1RPR0dMRV9tZW51Ij48L3NoYWRvdz48L3ZhbHVlPjwvYmxvY2s+CiAgICAgICAgICAgIGAsCiAgICAgICAgICB9LAogICAgICAgICAgeyBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkxBQkVMLCB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgiU2xvd2VyIHRoYW4gTm9ybWFsICd3aGVuIEkgcmVjZWl2ZSciKSB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJ3aGVuUmVjZWl2ZWQiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkhBVCwKICAgICAgICAgICAgZXh0ZW5zaW9uczogWyJjb2xvdXJzX2V2ZW50Il0sCiAgICAgICAgICAgIGlzRWRnZUFjdGl2YXRlZDogZmFsc2UsIGhpZGVGcm9tUGFsZXR0ZTogdHJ1ZSwKICAgICAgICAgICAgc2hvdWxkUmVzdGFydEV4aXN0aW5nVGhyZWFkczogdHJ1ZSwKICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoIndoZW4gSSByZWNlaXZlIFtCUk9BRENBU1RfT1BUSU9OXSIpLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBCUk9BRENBU1RfT1BUSU9OOiB7IHR5cGU6IG51bGwgfQogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5YTUwsCiAgICAgICAgICAgIHhtbDogYAogICAgICAgICAgICAgIDxibG9jayB0eXBlPSJTUG1lc3NhZ2VQbHVzX3doZW5SZWNlaXZlZCI+PHZhbHVlIG5hbWU9IkJST0FEQ0FTVF9PUFRJT04iPjxzaGFkb3cgdHlwZT0iZXZlbnRfYnJvYWRjYXN0X21lbnUiPjwvc2hhZG93PjwvdmFsdWU+PC9ibG9jaz4KICAgICAgICAgICAgYCwKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgICBtZW51czogewogICAgICAgICAgVEFSR0VUUzogeyBhY2NlcHRSZXBvcnRlcnM6IHRydWUsIGl0ZW1zOiAiX2dldFRhcmdldHMiIH0sCiAgICAgICAgICBTSE9VTERfV0FJVDogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoewogICAgICAgICAgICAgICAgZGVmYXVsdDogImNvbnRpbnVlIiwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiVXNlZCBpbiBjb250ZXh0ICdicm9hZGNhc3QgWy4uLl0gdG8gWy4uLl0gYW5kIFtjb250aW51ZV0nLiBXb24ndCB3YWl0IGZvciBicm9hZGNhc3RzIHRvIGZpbmlzaC4iLAogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIHZhbHVlOiAiY29udGludWUiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSh7CiAgICAgICAgICAgICAgICBkZWZhdWx0OiAid2FpdCIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIlVzZWQgaW4gY29udGV4dCAnYnJvYWRjYXN0IFsuLi5dIHRvIFsuLi5dIGFuZCBbd2FpdF0nLiBXaWxsIHdhaXQgZm9yIGJyb2FkY2FzdHMgdG8gZmluaXNoLiIsCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgdmFsdWU6ICJ3YWl0IgogICAgICAgICAgICB9CiAgICAgICAgICBdLAogICAgICAgICAgVE9HR0xFOiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSh7CiAgICAgICAgICAgICAgICBkZWZhdWx0OiAib24iLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJBbGxvd3Mgb25seSBvbmUgaW5zdGFuY2Ugb2YgYSBicm9hZGNhc3QsIHJlc3RhcnRzIG9sZCBpbnN0YW5jZSIsCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgdmFsdWU6ICJvbiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKHsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICJvZmYiLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJBbGxvd3MgbXVsdGlwbGUgaW5zdGFuY2VzIG9mIGEgYnJvYWRjYXN0LCBubyByZXN0YXJ0cyIsCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgdmFsdWU6ICJvZmYiCiAgICAgICAgICAgIH0KICAgICAgICAgIF0KICAgICAgICB9LAogICAgICB9OwogICAgfQoKICAgIC8vIEhlbHBlciBGdW5jcwogICAgX2dldFRhcmdldHMoKSB7CiAgICAgIGNvbnN0IHNwcml0ZU5hbWVzID0gWwogICAgICAgIHsgdGV4dDogU2NyYXRjaC50cmFuc2xhdGUoImFsbCBzcHJpdGVzIiksIHZhbHVlOiBBTEwgfSwKICAgICAgICB7IHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJzdGFnZSIpLCB2YWx1ZTogU1RBR0UgfSwKICAgICAgICB7IHRleHQ6IFNjcmF0Y2gudHJhbnNsYXRlKCJteXNlbGYgYW5kIGNsb25lcyIpLCB2YWx1ZTogTVlTRUxGIH0sCiAgICAgICAgeyB0ZXh0OiBTY3JhdGNoLnRyYW5zbGF0ZSgibXlzZWxmIG9ubHkiKSwgdmFsdWU6IE1ZU0VMRjIgfQogICAgICBdOwogICAgICBjb25zdCB0YXJnZXRzID0gcnVudGltZS50YXJnZXRzOwogICAgICBmb3IgKGxldCBpbmRleCA9IDE7IGluZGV4IDwgdGFyZ2V0cy5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICBjb25zdCB0YXJnZXQgPSB0YXJnZXRzW2luZGV4XTsKICAgICAgICBpZiAodGFyZ2V0LmlzT3JpZ2luYWwpIHsKICAgICAgICAgIGNvbnN0IHRhcmdldE5hbWUgPSB0YXJnZXQuZ2V0TmFtZSgpOwogICAgICAgICAgc3ByaXRlTmFtZXMucHVzaCh7IHRleHQ6IHRhcmdldE5hbWUsIHZhbHVlOiB0YXJnZXROYW1lIH0pOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gc3ByaXRlTmFtZXM7CiAgICB9CgogICAgLyoqCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFyZ2V0TmFtZQogICAgICogQHBhcmFtIHtWTS5CbG9ja1V0aWxpdHl9IHV0aWwKICAgICAqIEByZXR1cm5zIHtWTS5UYXJnZXR8dW5kZWZpbmVkfQogICAgICovCiAgICBfZ2V0VGFyZ2V0RnJvbU1lbnUodGFyZ2V0TmFtZSwgdXRpbCkgewogICAgICBpZiAodGFyZ2V0TmFtZSA9PT0gQUxMKSByZXR1cm4gdW5kZWZpbmVkOwogICAgICBpZiAodGFyZ2V0TmFtZSA9PT0gU1RBR0UpIHJldHVybiB1dGlsLnJ1bnRpbWUuZ2V0VGFyZ2V0Rm9yU3RhZ2UoKTsKICAgICAgaWYgKHRhcmdldE5hbWUgPT09IE1ZU0VMRiB8fCB0YXJnZXROYW1lID09PSBNWVNFTEYyKSByZXR1cm4gdXRpbC50YXJnZXQ7CiAgICAgIHJldHVybiB1dGlsLnJ1bnRpbWUuZ2V0U3ByaXRlVGFyZ2V0QnlOYW1lKHRhcmdldE5hbWUpIHx8IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYnJvYWRjYXN0TmFtZQogICAgICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldE5hbWUKICAgICAqIEBwYXJhbSB7dW5rbm93bn0gZGF0YQogICAgICogQHBhcmFtIHtWTS5CbG9ja1V0aWxpdHl9IHV0aWwKICAgICAqIEByZXR1cm5zIHtWTS5UaHJlYWRbXX0KICAgICAqLwogICAgX2Jyb2FkY2FzdChicm9hZGNhc3ROYW1lLCB0YXJnZXROYW1lLCBkYXRhLCB1dGlsKSB7CiAgICAgIGlmICghYnJvYWRjYXN0TmFtZSkgcmV0dXJuIFtdOwogICAgICBjb25zdCB0YXJnZXQgPSB0aGlzLl9nZXRUYXJnZXRGcm9tTWVudSh0YXJnZXROYW1lLCB1dGlsKTsKICAgICAgbGV0IG5ld1RocmVhZHMgPSBbXTsKICAgICAgaWYgKHRhcmdldCkgewogICAgICAgIC8vIE1ZU0VMRjIgLT4gIm15c2VsZiBvbmx5IiBpcyB0aGUgZXhlY3V0b3JzIGluc3RhbmNlCiAgICAgICAgY29uc3QgY2xvbmVzID0gdGFyZ2V0TmFtZSA9PT0gTVlTRUxGMiA/IFt0YXJnZXRdIDogdGFyZ2V0LnNwcml0ZS5jbG9uZXM7CiAgICAgICAgZm9yIChjb25zdCBjbG9uZSBvZiBjbG9uZXMpIG5ld1RocmVhZHMgPSBuZXdUaHJlYWRzLmNvbmNhdCh1dGlsLnN0YXJ0SGF0cygiZXZlbnRfd2hlbmJyb2FkY2FzdHJlY2VpdmVkIiwgeyBCUk9BRENBU1RfT1BUSU9OOiBicm9hZGNhc3ROYW1lIH0sIGNsb25lKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gQWxsIHNwcml0ZXMKICAgICAgICBuZXdUaHJlYWRzID0gdXRpbC5zdGFydEhhdHMoImV2ZW50X3doZW5icm9hZGNhc3RyZWNlaXZlZCIsIHsgQlJPQURDQVNUX09QVElPTjogYnJvYWRjYXN0TmFtZSB9KTsKICAgICAgfQogICAgICBmb3IgKGNvbnN0IHRocmVhZCBvZiBuZXdUaHJlYWRzKSB0aHJlYWRba1JlY2VpdmVkRGF0YV0gPSBkYXRhOwogICAgICByZXR1cm4gbmV3VGhyZWFkczsKICAgIH0KCiAgICBfZ2V0TWVzc2FnZUhhdHMobmFtZSwgdHlwZSkgewogICAgICBjb25zdCBJRHMgPSBbXTsKICAgICAgcnVudGltZS5hbGxTY3JpcHRzQnlPcGNvZGVEbygKICAgICAgICAiZXZlbnRfd2hlbmJyb2FkY2FzdHJlY2VpdmVkIiwgKHNjcmlwdCwgdGFyZ2V0KSA9PiB7CiAgICAgICAgICBjb25zdCB7IGJsb2NrSWQ6IHRvcEJsb2NrSWQsIGZpZWxkc09mSW5wdXRzOiBoYXRGaWVsZHMgfSA9IHNjcmlwdDsKICAgICAgICAgIGlmIChoYXRGaWVsZHMuQlJPQURDQVNUX09QVElPTi52YWx1ZSA9PT0gbmFtZS50b1VwcGVyQ2FzZSgpKSB7CiAgICAgICAgICAgIElEcy5wdXNoKHR5cGUgPT09ICJJRHMiID8gdG9wQmxvY2tJZCA6IHRhcmdldCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICApOwogICAgICByZXR1cm4gSURzOwogICAgfQoKICAgIC8qKgogICAgICogQHBhcmFtIHtWTS5CbG9ja1V0aWxpdHl9IHV0aWwKICAgICAqLwogICAgX3dhaXRGb3JTdGFydGVkVGhyZWFkcyh1dGlsKSB7CiAgICAgIGlmICh1dGlsLnN0YWNrRnJhbWUuc3RhcnRlZFRocmVhZHMuc29tZSgodGhyZWFkKSA9PiBydW50aW1lLnRocmVhZHMuaW5kZXhPZih0aHJlYWQpICE9PSAtMSkpIHsKICAgICAgICBjb25zdCBydW5uaW5nID0gdXRpbC5zdGFja0ZyYW1lLnN0YXJ0ZWRUaHJlYWRzLmV2ZXJ5KCh0aHJlYWQpID0+IHJ1bnRpbWUuaXNXYWl0aW5nVGhyZWFkKHRocmVhZCkpOwogICAgICAgIGlmIChydW5uaW5nKSB1dGlsLnlpZWxkVGljaygpOwogICAgICAgIGVsc2UgdXRpbC55aWVsZCgpOwogICAgICB9CiAgICB9CgogICAgLy8gQmxvY2sgRnVuY3MKICAgIG1lc3NhZ2VOYW1lKGFyZ3MsIHV0aWwpIHsKICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodXRpbC50aHJlYWQsIGtNZXNzYWdlTmFtZSkpIHJldHVybiAiIjsKICAgICAgY29uc3QgbmFtZSA9IHV0aWwudGhyZWFkW2tNZXNzYWdlTmFtZV07CiAgICAgIC8vIFRoZSBuYW1lIHN0b3JlZCBvbiB0aGUgdGhyZWFkIGlzIHRvVXBwZXJDYXNlKCksIHNvIGxvb2t1cCB0aGUgdXNlci1mYWNpbmcgbmFtZQogICAgICBjb25zdCB2YXJpYWJsZSA9IHV0aWwucnVudGltZS5nZXRUYXJnZXRGb3JTdGFnZSgpLmxvb2t1cEJyb2FkY2FzdEJ5SW5wdXRWYWx1ZShuYW1lKTsKICAgICAgaWYgKHZhcmlhYmxlKSByZXR1cm4gdmFyaWFibGUubmFtZTsKICAgICAgcmV0dXJuIG5hbWU7IC8vIHRoaXMgaXMgYSBkeW5hbWljIG1lc3NhZ2UKICAgIH0KCiAgICBicm9hZGNhc3RUYXJnZXQoYXJncywgdXRpbCkgewogICAgICB0aGlzLmJyb2FkY2FzdERhdGFUYXJnZXQoeyAuLi5hcmdzLCBEQVRBOiAiIiB9LCB1dGlsKTsKICAgIH0KCiAgICBicm9hZGNhc3REYXRhVGFyZ2V0KGFyZ3MsIHV0aWwpIHsKICAgICAgaWYgKCF1dGlsLnN0YWNrRnJhbWUuc3RhcnRlZFRocmVhZHMpIHsKICAgICAgICBjb25zdCBuYW1lID0gU2NyYXRjaC5DYXN0LnRvU3RyaW5nKGFyZ3MuQlJPQURDQVNUX09QVElPTik7CiAgICAgICAgY29uc3QgZGF0YSA9IFNjcmF0Y2guQ2FzdC50b1N0cmluZyhhcmdzLkRBVEEpOwogICAgICAgIGNvbnN0IG5ld1RocmVhZHMgPSB0aGlzLl9icm9hZGNhc3QobmFtZSwgYXJncy5UQVJHRVQsIGRhdGEsIHV0aWwpOwogICAgICAgIGlmICgKICAgICAgICAgIG5ld1RocmVhZHMubGVuZ3RoID09PSAwIHx8IFNjcmF0Y2guQ2FzdC50b1N0cmluZyhhcmdzLldBSVQpID09PSAiY29udGludWUiCiAgICAgICAgKSByZXR1cm47CiAgICAgICAgdXRpbC5zdGFja0ZyYW1lLnN0YXJ0ZWRUaHJlYWRzID0gbmV3VGhyZWFkczsKICAgICAgfQogICAgICB0aGlzLl93YWl0Rm9yU3RhcnRlZFRocmVhZHModXRpbCk7CiAgICB9CgogICAgYnJvYWRjYXN0QXJyYXkoYXJncywgdXRpbCkgewogICAgICBpZiAoIXV0aWwuc3RhY2tGcmFtZS5zdGFydGVkVGhyZWFkcykgewogICAgICAgIGNvbnN0IG5hbWVzVHh0ID0gU2NyYXRjaC5DYXN0LnRvU3RyaW5nKGFyZ3MuTUVTU0FHRVMpOwogICAgICAgIGxldCBwYXJzZWROYW1lczsKICAgICAgICB0cnkgewogICAgICAgICAgLy8gdHJ5IHBhcnNpbmcgYW5kIHJlbW92aW5nIGR1cGxpY2F0ZXMKICAgICAgICAgIHBhcnNlZE5hbWVzID0gWy4uLm5ldyBTZXQoSlNPTi5wYXJzZShuYW1lc1R4dCkpXTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBjb25zb2xlLndhcm4oZSk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGNvbnN0IGRhdGEgPSBTY3JhdGNoLkNhc3QudG9TdHJpbmcoYXJncy5EQVRBKTsKICAgICAgICBjb25zdCBuZXdUaHJlYWRzID0gW107CiAgICAgICAgZm9yIChjb25zdCBuYW1lIG9mIHBhcnNlZE5hbWVzKSBuZXdUaHJlYWRzLmNvbmNhdCh0aGlzLl9icm9hZGNhc3QobmFtZSwgYXJncy5UQVJHRVQsIGRhdGEsIHV0aWwpKTsKICAgICAgICBpZiAoCiAgICAgICAgICBuZXdUaHJlYWRzLmxlbmd0aCA9PT0gMCB8fCBTY3JhdGNoLkNhc3QudG9TdHJpbmcoYXJncy5XQUlUKSA9PT0gImNvbnRpbnVlIgogICAgICAgICkgcmV0dXJuOwogICAgICAgIHV0aWwuc3RhY2tGcmFtZS5zdGFydGVkVGhyZWFkcyA9IG5ld1RocmVhZHM7CiAgICAgIH0KICAgICAgdGhpcy5fd2FpdEZvclN0YXJ0ZWRUaHJlYWRzKHV0aWwpOwogICAgfQoKICAgIHJlY2VpdmVkRGF0YShhcmdzLCB1dGlsKSB7CiAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHV0aWwudGhyZWFkLCBrUmVjZWl2ZWREYXRhKSkgcmV0dXJuICIiOwogICAgICByZXR1cm4gdXRpbC50aHJlYWRba1JlY2VpdmVkRGF0YV07CiAgICB9CgogICAgb3RoZXJEYXRhKGFyZ3MsIHV0aWwpIHsKICAgICAgY29uc3QgYnJvYWRjYXN0ID0gU2NyYXRjaC5DYXN0LnRvU3RyaW5nKGFyZ3MuQlJPQURDQVNUX09QVElPTik7CiAgICAgIGNvbnN0IGJsb2NrSWRzID0gdGhpcy5fZ2V0TWVzc2FnZUhhdHMoYnJvYWRjYXN0LCAiSURzIik7CiAgICAgIGxldCByZWNlaXZlZCA9ICIiOwogICAgICBjb25zdCB0YXJnZXQgPSB0aGlzLl9nZXRUYXJnZXRGcm9tTWVudShhcmdzLlRBUkdFVCwgdXRpbCk7CiAgICAgIGZvciAoY29uc3QgSUQgb2YgYmxvY2tJZHMpIHsKICAgICAgICBjb25zdCB0aHJlYWQgPSBydW50aW1lLnRocmVhZHMuZmluZCgodGhyZWFkKSA9PiB0aHJlYWQudG9wQmxvY2sgPT09IElEKTsKICAgICAgICBpZiAodGhyZWFkICYmIHRocmVhZC5yZWNlaXZlZERhdGEgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgaWYgKCF0YXJnZXQpIHJlY2VpdmVkID0gdGhyZWFkLnJlY2VpdmVkRGF0YTsKICAgICAgICAgIGVsc2UgaWYgKHRhcmdldC5pZCA9PT0gdGhyZWFkLnRhcmdldC5pZCkgcmVjZWl2ZWQgPSB0aHJlYWQucmVjZWl2ZWREYXRhOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcmVjZWl2ZWQ7CiAgICB9CgogICAgYnJvYWRjYXN0UmV0dXJuKGFyZ3MsIHV0aWwpIHsKICAgICAgcmV0dXJuIHRoaXMuYnJvYWRjYXN0UmV0dXJuRGF0YSh7IC4uLmFyZ3MsIERBVEE6ICIiIH0sIHV0aWwpIHx8ICIiOwogICAgfQoKICAgIGJyb2FkY2FzdFJldHVybkRhdGEoYXJncywgdXRpbCkgewogICAgICBpZiAoIXV0aWwuc3RhY2tGcmFtZS5icm9hZGNhc3RWYXIpIHV0aWwuc3RhY2tGcmFtZS5icm9hZGNhc3RWYXIgPSBTY3JhdGNoLkNhc3QudG9TdHJpbmcoYXJncy5CUk9BRENBU1RfT1BUSU9OKTsKICAgICAgY29uc3QgZGF0YSA9IFNjcmF0Y2guQ2FzdC50b1N0cmluZyhhcmdzLkRBVEEpOwogICAgICBsZXQgcmVzcG9uc2UgPSAiIjsKICAgICAgaWYgKHV0aWwuc3RhY2tGcmFtZS5icm9hZGNhc3RWYXIpIHsKICAgICAgICBjb25zdCBuYW1lID0gdXRpbC5zdGFja0ZyYW1lLmJyb2FkY2FzdFZhcjsKICAgICAgICBpZiAoIXV0aWwuc3RhY2tGcmFtZS5zdGFydGVkVGhyZWFkcykgewogICAgICAgICAgdXRpbC5zdGFja0ZyYW1lLnN0YXJ0ZWRUaHJlYWRzID0gdGhpcy5fYnJvYWRjYXN0KAogICAgICAgICAgICBuYW1lLCBhcmdzLlRBUkdFVCwgZGF0YSwgdXRpbAogICAgICAgICAgKTsKICAgICAgICAgIGlmICh1dGlsLnN0YWNrRnJhbWUuc3RhcnRlZFRocmVhZHMubGVuZ3RoID09PSAwKSByZXR1cm47CiAgICAgICAgfQogICAgICAgIGNvbnN0IHdhaXRpbmcgPSB1dGlsLnN0YWNrRnJhbWUuc3RhcnRlZFRocmVhZHMuc29tZSgodGhyZWFkKSA9PiBydW50aW1lLnRocmVhZHMuaW5kZXhPZih0aHJlYWQpICE9PSAtMSk7CiAgICAgICAgZm9yIChjb25zdCB0aHJlYWQgb2YgdXRpbC5zdGFja0ZyYW1lLnN0YXJ0ZWRUaHJlYWRzKSB7CiAgICAgICAgICBpZiAodGhyZWFkLmp1c3RSZXBvcnRlZCkgewogICAgICAgICAgICByZXNwb25zZSA9IHRocmVhZC5qdXN0UmVwb3J0ZWQ7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoIXJlc3BvbnNlICYmIHdhaXRpbmcpIHsKICAgICAgICAgIGlmICh1dGlsLnN0YWNrRnJhbWUuc3RhcnRlZFRocmVhZHMuZXZlcnkoKHRocmVhZCkgPT4gcnVudGltZS5pc1dhaXRpbmdUaHJlYWQodGhyZWFkKSkpCiAgICAgICAgICAgIHV0aWwueWllbGRUaWNrKCk7CiAgICAgICAgICBlbHNlIHV0aWwueWllbGQoKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHJlc3BvbnNlID8gcmVzcG9uc2UgOiAiIjsKICAgIH0KCiAgICByZXNwb25kRGF0YShhcmdzLCB1dGlsKSB7CiAgICAgIHV0aWwudGhyZWFkLmp1c3RSZXBvcnRlZCA9IFNjcmF0Y2guQ2FzdC50b1N0cmluZyhhcmdzLkRBVEEpOwogICAgICAvL0RlbGF5IHRoZSBEZWxldGlvbiBvZiB0aGlzIFRocmVhZAogICAgICBpZiAodXRpbC5zdGFja1RpbWVyTmVlZHNJbml0KCkpIHsKICAgICAgICB1dGlsLnN0YXJ0U3RhY2tUaW1lcigwKTsKICAgICAgICBydW50aW1lLnJlcXVlc3RSZWRyYXcoKTsKICAgICAgICB1dGlsLnlpZWxkKCk7CiAgICAgIH0gZWxzZSBpZiAoIXV0aWwuc3RhY2tUaW1lckZpbmlzaGVkKCkpIHV0aWwueWllbGQoKTsKICAgICAgdXRpbC50aHJlYWQuc3RvcFRoaXNTY3JpcHQoKTsKICAgIH0KCiAgICBpc1JlY2VpdmVkKGFyZ3MpIHsKICAgICAgY29uc3QgYnJvYWRjYXN0ID0gU2NyYXRjaC5DYXN0LnRvU3RyaW5nKGFyZ3MuQlJPQURDQVNUX09QVElPTik7CiAgICAgIGNvbnN0IGJsb2NrSWRzID0gdGhpcy5fZ2V0TWVzc2FnZUhhdHMoYnJvYWRjYXN0LCAiSURzIik7CiAgICAgIGxldCB3YWl0aW5nID0gZmFsc2U7CiAgICAgIGZvciAoY29uc3QgSUQgb2YgYmxvY2tJZHMpIHsKICAgICAgICBjb25zdCB0aHJlYWQgPSBydW50aW1lLnRocmVhZHMuZmluZCgodGhyZWFkKSA9PiB0aHJlYWQudG9wQmxvY2sgPT09IElEKTsKICAgICAgICBpZiAodGhyZWFkICYmIHRocmVhZC5tZXNzYWdlRmxhZyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICB0aHJlYWQubWVzc2FnZUZsYWcgPSBEYXRlLm5vdygpOwogICAgICAgICAgd2FpdGluZyA9IHRydWU7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHdhaXRpbmc7CiAgICB9CgogICAgaXNXYWl0aW5nKGFyZ3MpIHsKICAgICAgY29uc3QgYnJvYWRjYXN0ID0gU2NyYXRjaC5DYXN0LnRvU3RyaW5nKGFyZ3MuQlJPQURDQVNUX09QVElPTik7CiAgICAgIGNvbnN0IGJsb2NrSWRzID0gdGhpcy5fZ2V0TWVzc2FnZUhhdHMoYnJvYWRjYXN0LCAiSURzIik7CiAgICAgIGxldCB3YWl0aW5nID0gZmFsc2U7CiAgICAgIGZvciAoY29uc3QgSUQgb2YgYmxvY2tJZHMpIHsKICAgICAgICBjb25zdCB0aHJlYWQgPSBydW50aW1lLnRocmVhZHMuZmluZCgodGhyZWFkKSA9PiB0aHJlYWQudG9wQmxvY2sgPT09IElEKTsKICAgICAgICBpZiAodGhyZWFkKSB7CiAgICAgICAgICB3YWl0aW5nID0gdHJ1ZTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gd2FpdGluZzsKICAgIH0KCiAgICByZWNlaXZlcnMoYXJncykgewogICAgICBjb25zdCBicm9hZGNhc3QgPSBTY3JhdGNoLkNhc3QudG9TdHJpbmcoYXJncy5CUk9BRENBU1RfT1BUSU9OKTsKICAgICAgY29uc3QgdGFyZ2V0cyA9IHRoaXMuX2dldE1lc3NhZ2VIYXRzKGJyb2FkY2FzdCwgInRhcmdldHMiKTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0YXJnZXRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgbmFtZSA9IHRhcmdldHNbaV0uZ2V0TmFtZSgpOwogICAgICAgIHRhcmdldHNbaV0gPSB0YXJnZXRzW2ldLmlzT3JpZ2luYWwgPyBuYW1lIDogYCR7bmFtZX0gKGNsb25lKWA7CiAgICAgIH0KICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRhcmdldHMpOwogICAgfQoKICAgIHRvZ2dsZVJlc3RhcnQoYXJncykgewogICAgICBjb25zdCBtc2cgPSBTY3JhdGNoLkNhc3QudG9TdHJpbmcoYXJncy5CUk9BRENBU1RfT1BUSU9OKS50b1VwcGVyQ2FzZSgpOwogICAgICBjb25zdCBpbmRleCA9IG5vblJlc3RhcnRlZE1zZ3MuaW5kZXhPZihtc2cpOwogICAgICBpZiAoYXJncy5UT0dHTEUgPT09ICJvbiIgJiYgaW5kZXggPiAtMSkgbm9uUmVzdGFydGVkTXNncy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICBlbHNlIGlmIChhcmdzLlRPR0dMRSA9PT0gIm9mZiIgJiYgaW5kZXggPT09IC0xKSBub25SZXN0YXJ0ZWRNc2dzLnB1c2gobXNnKTsKICAgIH0KCiAgICB0b2dnbGVPdmVybGFwKGFyZ3MpIHsKICAgICAgY29uc3QgbXNnID0gU2NyYXRjaC5DYXN0LnRvU3RyaW5nKGFyZ3MuQlJPQURDQVNUX09QVElPTikudG9VcHBlckNhc2UoKTsKICAgICAgY29uc3QgaW5kZXggPSB0aHJlYWRlZE1zZ3MuaW5kZXhPZihtc2cpOwogICAgICBpZiAoYXJncy5UT0dHTEUgPT09ICJvbiIgJiYgaW5kZXggPiAtMSkgdGhyZWFkZWRNc2dzLnB1c2gobXNnKTsKICAgICAgZWxzZSBpZiAoYXJncy5UT0dHTEUgPT09ICJvZmYiICYmIGluZGV4ID09PSAtMSkgdGhyZWFkZWRNc2dzLnNwbGljZShpbmRleCwgMSk7CiAgICB9CgogICAgd2hlblJlY2VpdmVkKGFyZ3MsIHV0aWwpIHsKICAgICAgY29uc3QgbWVzc2FnZU5hbWUgPSB1dGlsLnRocmVhZFtrTWVzc2FnZU5hbWVdOwogICAgICBjb25zdCBpbnB1dE5hbWUgPSBTY3JhdGNoLkNhc3QudG9TdHJpbmcoYXJncy5CUk9BRENBU1RfT1BUSU9OKS50b1VwcGVyQ2FzZSgpOwogICAgICBpZiAobWVzc2FnZU5hbWUpIHJldHVybiBpbnB1dE5hbWUgPT09IG1lc3NhZ2VOYW1lOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfQoKICBTY3JhdGNoLmV4dGVuc2lvbnMucmVnaXN0ZXIobmV3IFNQbWVzc2FnZVBsdXMoKSk7Cn0pKFNjcmF0Y2gpOwo=","https://extensions.turbowarp.org/true-fantom/math.js"],"bakeExtensions":true,"maxTextureDimension":2048}